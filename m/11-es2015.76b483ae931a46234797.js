(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{Eh8b:function(e,t,n){"use strict";n.r(t),n.d(t,"AppAppearanceModule",function(){return hn});var i=n("ofXK"),a=n("3Pt+"),o=n("tyNb"),c=n("WAq7"),r=n("+rOU"),s=n("lJxs"),l=n("fXoL");const b=new l.r("APPEARANCE_EDITOR_CONFIG"),u={navigationRoutes:[],menus:{availableRoutes:["login","register","contact","billing/pricing","account-settings","admin/appearance","admin/users","admin/settings/authentication","admin/settings/branding","admin/settings/cache","admin/settings/providers","admin/roles"],positions:["admin-navbar","custom-page-navbar","auth-page-footer"]},sections:[{name:"general",position:1},{name:"themes",position:2},{name:"menus",position:3},{name:"custom-code",position:4},{name:"seo-settings",position:5}]};var d=n("fKqa");class p{constructor(e,t){this.route=e,this.queryParams=t,this.type=d.a.Navigate}}class h{constructor(e,t){this.key=e,this.value=t,this.type=d.a.SetConfig}}class m{constructor(e,t=0){this.selector=e,this.index=t,this.type=d.a.Select}}class g{constructor(){this.type=d.a.Deselect}}class f{constructor(e,t){this.key=e,this.value=t,this.type=d.a.SetColors}}class v{constructor(e){this.content=e,this.type=d.a.SetCustomCss}}class C{constructor(e){this.content=e,this.type=d.a.SetCustomHtml}}var y=n("LFZc"),x=n("2Vo4"),I=n("jtHE"),T=n("xgIS"),O=n("pLZG"),P=n("nYR2"),k=n("w1tV"),U=n("PE4B"),w=n.n(U),M=n("kmQS"),$=n("LRXf"),_=n("i2dy");let S=(()=>{class e{constructor(e,t,n,i){this.settings=e,this.router=t,this.http=n,this.toast=i,this.activePanel$=new x.a(null),this.defaultSettings={},this.initiated$=new I.a(1),this.loading$=new x.a(!1),this.changes$=new x.a(null)}addChanges(e){this.changes$.next(Object.assign(Object.assign({},this.changes$.value),e))}openPanel(e){const t=this.config.sections.find(t=>Object(c.a)(t.name)===e);this.activePanel$.next(t),this.navigate(t)}init(e,t,n){return Object(T.a)(window,"message").pipe(Object(O.a)(e=>e.data===y.a&&new URL(e.origin).hostname===window.location.hostname)).subscribe(()=>{this.initiated$.next(!0),this.initiated$.complete(),this.activePanel$.value&&this.navigate(this.activePanel$.value)}),t.forEach(e=>{"env"===e.name?this.defaultSettings=Object.assign(Object.assign({},this.defaultSettings),e.value):this.defaultSettings[e.name]=e.value}),this.initConfig(n),this.initIframe(e),this.initiated$}saveChanges(e){e&&this.addChanges(e),this.loading$.next(!0);const t=(this.saveRequest?this.saveRequest:e=>this.http.post("admin/appearance",e))(this.changes$.value).pipe(Object(P.a)(()=>this.loading$.next(!1)),Object(k.a)());return t.subscribe(()=>{this.changes$.next(null),this.toast.open("Appearance saved")}),t}setSaveRequest(e){this.saveRequest=e}closeActivePanel(){this.router.navigate(["/admin/appearance"])}navigate(e){this.postMessage(new p((null==e?void 0:e.route)||this.config.defaultRoute,null==e?void 0:e.queryParams))}setConfig(e,t){this.postMessage(new h(e,t))}selectNode(e,t=0){e&&this.postMessage(new m(e,t))}deselectNode(){this.postMessage(new g)}postMessage(e){this.previewWindow.postMessage(e,"*")}currentValue(e){return e.startsWith("env.")||e.startsWith("custom-code.")?this.defaultSettings[e]:this.settings.get(e)}initConfig(e){const t=w.a.all(e);t.sections=t.sections.sort((e,t)=>e.position>t.position?1:-1),t.defaultRoute||(t.defaultRoute="/"),this.config=t}initIframe(e){const t=this.settings.getBaseUrl()+this.config.defaultRoute+`?be-preview-mode=${y.a}`;e.src=function(e){return e.replace(/([^:]\/)\/+/g,"$1")}(t),this.previewWindow=e.contentWindow}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(M.a),l.Yb(o.e),l.Yb($.a),l.Yb(_.b))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var V=n("OnlV"),F=n("XhcP"),G=n("NFeN"),D=n("Rd8u"),N=n("bTqV"),j=n("Wf9w");function A(e,t){1&e&&l.Pb(0,"mat-icon",9)}function L(e,t){if(1&e&&(l.Ub(0,"span"),l.Gc(1,A,1,0,"mat-icon",7),l.Ub(2,"span",8),l.Ic(3),l.Tb(),l.Tb()),2&e){const e=l.fc(),t=e.first,n=e.last,i=e.$implicit,a=l.fc();l.Cb(1),l.mc("ngIf",!t),l.Cb(1),l.Gb("last",n),l.Cb(1),l.Jc(a.viewName(i))}}function E(e,t){if(1&e&&(l.Sb(0),l.Gc(1,L,4,4,"span",6),l.Rb()),2&e){const e=t.$implicit;l.Cb(1),l.mc("ngIf",e)}}let R=(()=>{class e{constructor(){this.path=[],this.back=new l.n}viewName(e){return Object(j.a)(e).replace(/_/g," ")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Ib({type:e,selectors:[["appearance-panel-meta"]],inputs:{path:"path"},outputs:{back:"back"},decls:7,vars:1,consts:[[1,"back-button",3,"click"],["svgIcon","keyboard-arrow-left"],[1,"title"],["trans","",1,"static"],[1,"path"],[4,"ngFor","ngForOf"],[4,"ngIf"],["svgIcon","keyboard-arrow-right","class","separator",4,"ngIf"],["trans","",1,"name"],["svgIcon","keyboard-arrow-right",1,"separator"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.bc("click",function(){return t.back.emit()}),l.Pb(1,"mat-icon",1),l.Tb(),l.Ub(2,"div",2),l.Ub(3,"div",3),l.Ic(4,"Customizing"),l.Tb(),l.Ub(5,"div",4),l.Gc(6,E,2,1,"ng-container",5),l.Tb(),l.Tb()),2&e&&(l.Cb(6),l.mc("ngForOf",t.path))},directives:[G.a,D.a,i.n,i.o],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:70px;margin-bottom:10px;border-bottom:1px solid var(--be-divider-default);background-color:var(--be-background)}.title[_ngcontent-%COMP%]{padding:10px}.path[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;max-width:240px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.name[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;text-transform:capitalize}.last[_ngcontent-%COMP%]{color:var(--be-accent-default)}.separator[_ngcontent-%COMP%]{vertical-align:middle;color:var(--be-secondary-text);width:18px;height:18px;line-height:18px}"],changeDetection:0}),e})();var q=n("h586"),z=n("Lm4C"),H=n("QeDF"),J=n("oJgS"),W=n("W5HX"),B=n("8cGs"),Y=n("STbY"),K=n("gA0O"),Q=n("bv9b");function X(e,t){1&e&&l.Pb(0,"image-or-icon",11),2&e&&l.mc("src",t.ngIf)}function Z(e,t){1&e&&(l.Ub(0,"div",12),l.Pb(1,"mat-icon",13),l.Ub(2,"span",14),l.Ic(3,"\u4e0a\u4f20"),l.Tb(),l.Tb())}function ee(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",15),l.bc("click",function(){return l.xc(e),l.fc().remove()}),l.Ic(1,"Remove"),l.Tb()}}function te(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",15),l.bc("click",function(){return l.xc(e),l.fc().useDefault()}),l.Ic(1,"Use Default"),l.Tb()}}function ne(e,t){1&e&&l.Pb(0,"mat-progress-bar",16)}const ie=["*"];let ae=(()=>{class e{constructor(e,t,n,i){this.editor=e,this.uploadQueue=t,this.validator=n,this.settings=i,this.image$=new x.a(null),this.loading$=new x.a(!1),this.validator.showToast=!0}openModal(){const e={uri:this.backendUri||W.a.Image,httpParams:{diskPrefix:this.diskPrefix},validator:this.validator};Object(z.a)({types:[H.a.image]}).then(t=>{this.loading$.next(!0),this.uploadQueue.start(t,e).pipe(Object(P.a)(()=>this.loading$.next(!1))).subscribe(e=>{this.updateValue(e.fileEntry.url)})})}remove(){this.updateValue(null)}useDefault(){this.updateValue(this.defaultValue)}updateValue(e){this.propagateChange(e),this.image$.next(e+`?v=${Object(J.a)(8)}`)}writeValue(e){this.image$.next(e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(){}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(S),l.Ob(q.a),l.Ob(B.a),l.Ob(M.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["appearance-image-input"]],hostAttrs:["tabindex","0"],inputs:{defaultValue:"defaultValue",backendUri:"backendUri",diskPrefix:"diskPrefix"},features:[l.Bb([q.a,{provide:a.q,useExisting:e,multi:!0}])],ngContentSelectors:ie,decls:18,vars:12,consts:[[1,"field-container",3,"click"],["trans","",1,"label","fake-label"],[1,"img-container"],[3,"src",4,"ngIf","ngIfElse"],["noImage",""],[1,"actions-dropdown"],[1,"no-style",3,"matMenuTriggerFor","click"],["svgIcon","settings",1,"trigger-icon"],["actionsMenu",""],["mat-menu-item","","trans","",3,"click",4,"ngIf"],["mode","indeterminate","color","accent",4,"ngIf"],[3,"src"],[1,"no-image"],["svgIcon","photo-size-select-actual"],["trans","",1,"text"],["mat-menu-item","","trans","",3,"click"],["mode","indeterminate","color","accent"]],template:function(e,t){if(1&e&&(l.lc(),l.Ub(0,"div",0),l.bc("click",function(){return t.openModal()}),l.Ub(1,"div",1),l.kc(2),l.Tb(),l.Ub(3,"div",2),l.Gc(4,X,1,1,"image-or-icon",3),l.gc(5,"async"),l.Gc(6,Z,4,0,"ng-template",null,4,l.Hc),l.Ub(8,"div",5),l.Ub(9,"button",6),l.bc("click",function(e){return e.stopPropagation()}),l.Pb(10,"mat-icon",7),l.Tb(),l.Ub(11,"mat-menu",null,8),l.Gc(13,ee,2,0,"div",9),l.gc(14,"async"),l.Gc(15,te,2,0,"div",9),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Gc(16,ne,1,0,"mat-progress-bar",10),l.gc(17,"async")),2&e){const e=l.uc(7),n=l.uc(12);l.Cb(4),l.mc("ngIf",l.hc(5,6,t.image$))("ngIfElse",e),l.Cb(5),l.mc("matMenuTriggerFor",n),l.Cb(4),l.mc("ngIf",l.hc(14,8,t.image$)),l.Cb(2),l.mc("ngIf",t.defaultValue),l.Cb(1),l.mc("ngIf",l.hc(17,10,t.loading$))}},directives:[D.a,i.o,Y.d,G.a,Y.a,K.a,Y.b,Q.a],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block;cursor:pointer;margin-bottom:15px;position:relative}.label[_ngcontent-%COMP%]{margin-bottom:5px}.img-container[_ngcontent-%COMP%]{position:relative;height:80px;padding:5px;border:1px solid var(--be-divider-default);border-radius:4px;background-color:var(--be-chip);overflow:hidden}.img-container[_ngcontent-%COMP%], image-or-icon[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:100%}image-or-icon[_ngcontent-%COMP%]{height:100%}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;-o-object-fit:cover;object-fit:cover}.no-image[_ngcontent-%COMP%]{text-align:center}.no-image[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:block;color:var(--be-hint-text);width:40px;height:40px}.no-image[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--be-link);margin-top:3px;font-size:1.3rem}.actions-dropdown[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;color:var(--be-secondary-text)}.actions-dropdown[_ngcontent-%COMP%]   .trigger-icon[_ngcontent-%COMP%]{width:20px;height:20px}.mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%}"],changeDetection:0}),e})(),oe=(()=>{class e{constructor(e,t){this.el=e,this.editor=t}ngOnInit(){this.el.nativeElement.addEventListener("focus",()=>{this.editor.selectNode(this.selector)}),this.el.nativeElement.addEventListener("blur",()=>{this.editor.deselectNode()})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(l.l),l.Ob(S))},e.\u0275dir=l.Jb({type:e,selectors:[["","highlightInPreview",""]],inputs:{selector:["highlightInPreview","selector"]}}),e})();const ce=function(){return["General"]};let re=(()=>{class e{constructor(e,t){this.fb=e,this.editor=t,this.form=this.fb.group({"branding.logo_light":[""],"branding.logo_dark":[""],"branding.favicon":[""],"env.app_name":[""],"branding.site_description":[""]})}ngOnInit(){const e={};Object.keys(this.form.controls).forEach(t=>{e[t]=this.editor.currentValue(t)}),this.form.patchValue(e),this.form.valueChanges.subscribe(e=>{this.editor.addChanges(e)})}defaultValue(e){return this.editor.defaultSettings[e]}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(a.f),l.Ob(S))},e.\u0275cmp=l.Ib({type:e,selectors:[["general-appearance-panel"]],hostAttrs:[1,"appearance-panel"],decls:16,vars:8,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],["formControlName","branding.logo_light","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["formControlName","branding.logo_dark","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["backendUri","uploads/favicon","diskPrefix","branding_media","formControlName","branding.favicon",3,"defaultValue"],[1,"input-container"],["for","env.app_name","trans",""],["type","text","id","env.app_name","formControlName","env.app_name",3,"placeholder"],["for","branding.site_description","trans",""],["id","branding.site_description","rows","4","formControlName","branding.site_description",3,"placeholder"]],template:function(e,t){1&e&&(l.Ub(0,"appearance-panel-meta",0),l.bc("back",function(){return t.editor.closeActivePanel()}),l.Tb(),l.Ub(1,"div",1),l.Ub(2,"appearance-image-input",2),l.Ic(3," Logo #1 (For top navbar) "),l.Tb(),l.Ub(4,"appearance-image-input",3),l.Ic(5," Logo #2 (Everywhere else) "),l.Tb(),l.Ub(6,"appearance-image-input",4),l.Ic(7," Favicon "),l.Tb(),l.Ub(8,"div",5),l.Ub(9,"label",6),l.Ic(10,"Site Name"),l.Tb(),l.Pb(11,"input",7),l.Tb(),l.Ub(12,"div",5),l.Ub(13,"label",8),l.Ic(14,"Site Description"),l.Tb(),l.Pb(15,"textarea",9),l.Tb(),l.Tb()),2&e&&(l.mc("path",l.pc(7,ce)),l.Cb(1),l.mc("formGroup",t.form),l.Cb(1),l.mc("defaultValue",t.defaultValue("branding.logo_light")),l.Cb(2),l.mc("defaultValue",t.defaultValue("branding.logo_dark")),l.Cb(2),l.mc("defaultValue",t.defaultValue("branding.favicon")),l.Cb(5),l.mc("placeholder",t.defaultValue("env.app_name")),l.Cb(4),l.mc("placeholder",t.defaultValue("branding.site_description")))},directives:[R,a.t,a.k,ae,a.s,a.i,oe,D.a,a.c],styles:[""],changeDetection:0}),e})();var se=n("0IaG");let le=(()=>{class e{constructor(e){this.http=e}all(){return this.http.get("css-theme")}create(e){return this.http.post("css-theme",e)}update(e,t){return this.http.put(`css-theme/${e}`,t)}delete(e){return this.http.delete(`css-theme/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(l.Yb($.a))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var be=n("1jcm");function ue(e,t){1&e&&(l.Ub(0,"span",6),l.Ic(1,"Update Theme"),l.Tb())}function de(e,t){1&e&&(l.Ub(0,"span",6),l.Ic(1,"Create Theme"),l.Tb())}function pe(e,t){if(1&e&&(l.Ub(0,"div",21),l.Ic(1),l.Tb()),2&e){const e=l.fc().ngIf;l.Cb(1),l.Jc(e.name)}}function he(e,t){1&e&&(l.Ub(0,"span"),l.Ic(1,"Update"),l.Tb())}function me(e,t){1&e&&(l.Ub(0,"span"),l.Ic(1,"\u521b\u5efa"),l.Tb())}function ge(e,t){if(1&e){const e=l.Vb();l.Ub(0,"form",7),l.bc("ngSubmit",function(){return l.xc(e),l.fc().confirm()}),l.Ub(1,"mat-dialog-content",8),l.Ub(2,"div",9),l.Ub(3,"label",10),l.Ic(4,"Name"),l.Tb(),l.Pb(5,"input",11),l.Gc(6,pe,2,1,"div",12),l.Tb(),l.Ub(7,"div",13),l.Ub(8,"mat-slide-toggle",14),l.Ic(9,"Dark Theme"),l.Tb(),l.Ub(10,"p",6),l.Ic(11,"Whether this theme has light text on dark background."),l.Tb(),l.Tb(),l.Ub(12,"div",13),l.Ub(13,"mat-slide-toggle",15),l.Ic(14,"Default Dark Theme"),l.Tb(),l.Ub(15,"p",6),l.Ic(16,"Whether this theme should be used as default dark theme."),l.Tb(),l.Tb(),l.Ub(17,"div",13),l.Ub(18,"mat-slide-toggle",16),l.Ic(19,"Default Light Theme"),l.Tb(),l.Ub(20,"p",6),l.Ic(21,"Whether this theme should be used as default light theme."),l.Tb(),l.Tb(),l.Tb(),l.Ub(22,"mat-dialog-actions"),l.Ub(23,"button",17),l.bc("click",function(){return l.xc(e),l.fc().close()}),l.Ic(24,"Cancel"),l.Tb(),l.Ub(25,"button",18),l.gc(26,"async"),l.Gc(27,he,2,0,"span",19),l.Gc(28,me,2,0,"ng-template",null,20,l.Hc),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.ngIf,n=l.uc(29),i=l.fc();l.mc("formGroup",i.form),l.Cb(6),l.mc("ngIf",e.name),l.Cb(19),l.mc("disabled",l.hc(26,5,i.loading$)),l.Cb(2),l.mc("ngIf",i.data.theme)("ngIfElse",n)}}let fe=(()=>{class e{constructor(e,t,n,i,a){this.dialogRef=e,this.data=t,this.cssTheme=n,this.toast=i,this.fb=a,this.loading$=new x.a(!1),this.errors$=new x.a({}),this.form=this.fb.group({name:[""],is_dark:[!1],default_dark:[!1],default_light:[!1]}),t.theme&&this.form.patchValue(t.theme),this.form.get("default_dark").valueChanges.pipe(Object(O.a)(e=>!!e)).subscribe(()=>{this.form.get("default_light").setValue(!1)}),this.form.get("default_light").valueChanges.pipe(Object(O.a)(e=>!!e)).subscribe(()=>{this.form.get("default_dark").setValue(!1)})}confirm(){(this.data.theme?this.cssTheme.update(this.data.theme.id,this.form.value):this.cssTheme.create(this.form.value)).subscribe(e=>{this.toast.open(this.data.theme?"Theme updated":"Theme created"),this.close(e.theme)},e=>this.errors$.next(e.errors))}close(e){this.dialogRef.close(e)}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(se.g),l.Ob(se.a),l.Ob(le),l.Ob(_.b),l.Ob(a.f))},e.\u0275cmp=l.Ib({type:e,selectors:[["crupdate-css-theme-modal"]],decls:8,vars:5,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"formGroup","ngSubmit",4,"ngIf"],["trans",""],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","formControlName","name","required","","minlength","3"],["class","error",4,"ngIf"],[1,"setting-toggle-container"],["id","is_dark","formControlName","is_dark","trans",""],["id","default_dark","formControlName","default_dark","trans",""],["id","default_light","formControlName","default_light","trans",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[4,"ngIf","ngIfElse"],["creating",""],[1,"error"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"h2",1),l.Gc(2,ue,2,0,"span",2),l.Gc(3,de,2,0,"span",2),l.Tb(),l.Ub(4,"button",3),l.bc("click",function(){return t.close()}),l.Pb(5,"mat-icon",4),l.Tb(),l.Tb(),l.Gc(6,ge,30,7,"form",5),l.gc(7,"async")),2&e&&(l.Cb(2),l.mc("ngIf",t.data.theme),l.Cb(1),l.mc("ngIf",!t.data.theme),l.Cb(3),l.mc("ngIf",l.hc(7,3,t.errors$)))},directives:[se.h,i.o,G.a,D.a,a.t,a.k,se.e,a.c,a.s,a.i,a.A,a.o,be.a,se.c,N.b],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}"],changeDetection:0}),e})();var ve=n("/RwR"),Ce=n("QGXG"),ye=n("FBzJ"),xe=n("mrSG"),Ie=n("JYI4"),Te=n("dz5c");const Oe=["*"];let Pe=(()=>{class e{constructor(e){this.overlayPanel=e,this.color$=new x.a(null)}ngOnDestroy(){this.pickerSub&&this.pickerSub.unsubscribe()}writeValue(e){this.color$.next(e)}registerOnChange(e){this.propagateChange=e}registerOnTouched(){}openColorPicker(e){return Object(xe.a)(this,void 0,void 0,function*(){const{BeColorPickerModule:t}=yield n.e(3).then(n.bind(null,"0PT2"));this.pickerSub=this.overlayPanel.open(t.components.panel,{origin:new l.l(e.target),position:Ie.a,data:{color:this.color$.value}}).valueChanged().subscribe(e=>{this.color$.next(e),this.propagateChange(this.color$.value)})})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(Te.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["color-picker-input"]],features:[l.Bb([{provide:a.q,useExisting:e,multi:!0}])],ngContentSelectors:Oe,decls:7,vars:4,consts:[["type","button",1,"no-style","color-picker-btn",3,"click"],["svgIcon","drop-custom",1,"color-icon"],["trans","",1,"name"],["trans","",1,"change"]],template:function(e,t){1&e&&(l.lc(),l.Ub(0,"button",0),l.bc("click",function(e){return t.openColorPicker(e)}),l.Ub(1,"mat-icon",1),l.gc(2,"async"),l.Tb(),l.Ub(3,"span",2),l.kc(4),l.Tb(),l.Ub(5,"span",3),l.Ic(6,"Change"),l.Tb(),l.Tb()),2&e&&(l.Cb(1),l.Dc("color",l.hc(2,2,t.color$)))},directives:[G.a,D.a],pipes:[i.b],styles:[".color-picker-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px 0 15px;margin-bottom:15px;border-radius:4px;border:1px solid var(--be-divider-default);background-color:var(--be-background);cursor:pointer;height:57px;font-size:1.5rem;overflow:hidden;width:100%}.color-picker-btn[_ngcontent-%COMP%]   .color-icon[_ngcontent-%COMP%]{width:35px;height:35px}.color-picker-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-left:3px;margin-top:3px;font-size:1.4rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:160px;text-transform:capitalize}.color-picker-btn[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem;margin-left:auto}"],changeDetection:0}),e})();function ke(e,t){if(1&e&&(l.Ub(0,"li"),l.Ub(1,"color-picker-input",2),l.Ic(2),l.Tb(),l.Tb()),2&e){const e=t.$implicit,n=l.fc();l.Cb(1),l.mc("formControlName",e.key),l.Cb(1),l.Jc(n.viewName(e.key))}}let Ue=(()=>{class e{constructor(e,t){this.editor=e,this.themes=t,this.form=new a.j({}),this.colorCache={}}ngOnInit(){this.editor.setSaveRequest(this.saveColors.bind(this)),Object.entries(this.theme.colors).forEach(([e,t])=>{this.form.addControl(e,new a.g(t))}),this.editor.initiated$.subscribe(()=>{this.setColors(this.theme.colors),this.form.valueChanges.subscribe(e=>{this.setColors(e),this.editor.addChanges({colors:e})})})}ngOnDestroy(){this.editor.setSaveRequest(null)}saveColors(e){return this.themes.update(this.theme.id,e)}setColors(e){Object.entries(e).forEach(([e,t])=>{this.colorCache[e]!==t&&(this.editor.postMessage(new f(e,t)),this.colorCache[e]=t)})}viewName(e){return e.replace("be-","").replace(/-/g," ")}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(S),l.Ob(le))},e.\u0275cmp=l.Ib({type:e,selectors:[["css-theme-colors-panel"]],inputs:{theme:"theme"},decls:3,vars:4,consts:[[1,"unstyled-list",3,"formGroup"],[4,"ngFor","ngForOf"],["trans","",3,"formControlName"]],template:function(e,t){1&e&&(l.Ub(0,"ul",0),l.Gc(1,ke,3,2,"li",1),l.gc(2,"keyvalue"),l.Tb()),2&e&&(l.mc("formGroup",t.form),l.Cb(1),l.mc("ngForOf",l.hc(2,2,t.theme.colors)))},directives:[a.t,a.k,i.n,Pe,D.a,a.s,a.i],pipes:[i.i],styles:[""],changeDetection:0}),e})();function we(e,t){1&e&&l.Pb(0,"css-theme-colors-panel",5),2&e&&l.mc("theme",t.ngIf)}function Me(e,t){if(1&e){const e=l.Vb();l.Ub(0,"li",9),l.bc("click",function(){l.xc(e);const n=t.$implicit;return l.fc(2).setSelectedTheme(n)}),l.Ub(1,"div",10),l.Ic(2),l.Tb(),l.Ub(3,"div",11),l.bc("click",function(e){return e.stopPropagation()}),l.Ub(4,"button",12),l.bc("click",function(){l.xc(e);const n=t.$implicit;return l.fc(2).setSelectedTheme(n)}),l.Pb(5,"mat-icon",13),l.Tb(),l.Ub(6,"button",12),l.bc("click",function(){l.xc(e);const n=t.$implicit;return l.fc(2).openCrupdateThemeModal(n)}),l.Pb(7,"mat-icon",14),l.Tb(),l.Ub(8,"button",12),l.bc("click",function(){l.xc(e);const n=t.$implicit;return l.fc(2).maybeDeleteThemeModal(n)}),l.Pb(9,"mat-icon",15),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit;l.Cb(2),l.Jc(e.name)}}function $e(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",6),l.bc("click",function(){return l.xc(e),l.fc().openCrupdateThemeModal()}),l.Ic(1," New Theme "),l.Tb(),l.Ub(2,"ul",7),l.Gc(3,Me,10,1,"li",8),l.gc(4,"async"),l.Tb()}if(2&e){const e=l.fc();l.Cb(3),l.mc("ngForOf",l.hc(4,1,e.loadedThemes$))}}let _e=(()=>{class e{constructor(e,t,n,i,a,o){this.appearance=e,this.modal=t,this.themes=n,this.toast=i,this.router=a,this.route=o,this.loading$=new x.a(!1),this.loadedThemes$=new x.a([]),this.selectedTheme$=new x.a(null),this.path$=this.selectedTheme$.pipe(Object(s.a)(e=>{const t=["Themes"];return e&&t.push(e.name),t}))}ngOnInit(){this.reloadThemes()}ngOnDestroy(){this.querySub&&this.querySub.unsubscribe()}openCrupdateThemeModal(e){this.modal.open(fe,{theme:e}).afterClosed().subscribe(e=>{e&&this.reloadThemes()})}setSelectedTheme(e){this.router.navigate([],{queryParams:{theme:e&&e.id},queryParamsHandling:"merge"})}openPreviousPanel(){this.selectedTheme$.value?this.setSelectedTheme():this.appearance.closeActivePanel()}maybeDeleteThemeModal(e){this.modal.show(ve.a,{title:"Delete Theme",body:"Are you sure you want to delete this theme?",ok:"Delete"}).afterClosed().subscribe(t=>{t&&this.deleteTheme(e)})}reloadThemes(){this.loading$.next(!0),this.themes.all().pipe(Object(P.a)(()=>this.loading$.next(!1))).subscribe(e=>{this.loadedThemes$.next(e.pagination.data),this.bindToQueryParams()})}deleteTheme(e){this.themes.delete([e.id]).subscribe(()=>{this.toast.open("Theme deleted"),this.reloadThemes()})}bindToQueryParams(){this.querySub||(this.querySub=this.route.queryParams.subscribe(e=>{const t=this.loadedThemes$.value.find(t=>t.id===+e.theme);this.selectedTheme$.next(t)}))}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(S),l.Ob(Ce.a),l.Ob(le),l.Ob(_.b),l.Ob(o.e),l.Ob(o.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["themes-appearance-panel"]],decls:9,vars:10,consts:[[3,"path","back"],[1,"appearance-panel-content"],[3,"theme",4,"ngIf","ngIfElse"],["themesList",""],[1,"overlay","overlay-partial",3,"isVisible"],[3,"theme"],["mat-raised-button","","color","accent","type","button","trans","",1,"new-theme-button",3,"click"],[1,"unstyled-list"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"name"],[1,"actions",3,"click"],["mat-icon-button","","type","button",3,"click"],["svgIcon","drop-custom"],["svgIcon","edit"],["svgIcon","delete"]],template:function(e,t){if(1&e&&(l.Ub(0,"appearance-panel-meta",0),l.bc("back",function(){return t.openPreviousPanel()}),l.gc(1,"async"),l.Tb(),l.Ub(2,"div",1),l.Gc(3,we,1,1,"css-theme-colors-panel",2),l.gc(4,"async"),l.Gc(5,$e,5,3,"ng-template",null,3,l.Hc),l.Tb(),l.Pb(7,"loading-indicator",4),l.gc(8,"async")),2&e){const e=l.uc(6);l.mc("path",l.hc(1,4,t.path$)),l.Cb(3),l.mc("ngIf",l.hc(4,6,t.selectedTheme$))("ngIfElse",e),l.Cb(4),l.mc("isVisible",l.hc(8,8,t.loading$))}},directives:[R,i.o,ye.a,Ue,N.b,D.a,i.n,G.a],pipes:[i.b],styles:[".new-theme-button[_ngcontent-%COMP%]{margin-bottom:15px}"],changeDetection:0}),e})();var Se=n("WvtK");class Ve{constructor(e={}){this.type="link",this.order=1,this.condition=null,this.target=null,this.position=0,this.activeExact=!1;for(const t in e)this[t]=e[t];this.id=Math.floor(999*Math.random())}}var Fe=n("5+WD"),Ge=n("f9yG");let De=(()=>{class e{constructor(e,t){this.settings=e,this.appearance=t,this.allMenus$=new x.a([]),this.activeMenu$=new x.a(null)}create(){const e=[...this.allMenus$.value];this.activeMenu$.next(new Ge.a({name:"New Menu"})),e.push(this.activeMenu$.value),this.allMenus$.next(e),this.commitChanges()}reorderActiveMenuItems(e,t){const n=Object.assign({},this.activeMenu$.value);Object(Fe.f)(n.items,e,t),this.activeMenu$.next(n),this.commitChanges()}deleteActive(){const e=[...this.allMenus$.value],t=e.indexOf(this.activeMenu$.value);e.splice(t,1),this.activeMenu$.next(null),this.allMenus$.next(e),this.commitChanges()}addItem(e){const t=Object.assign({},this.activeMenu$.value);e=this.transformLocalLinksToRoutes(e),t.items.push(e),this.activeMenu$.next(t),this.commitChanges()}removeItem(e){const t=Object.assign({},this.activeMenu$.value),n=this.activeMenu$.value.items.indexOf(e);t.items.splice(n,1),this.activeMenu$.next(t),this.commitChanges()}transformLocalLinksToRoutes(e){const t=this.settings.getBaseUrl();return"link"!==e.type||-1===e.action.indexOf(t)||(e.type="route",e.action=e.action.replace(this.settings.getBaseUrl(),"")),e}commitChanges(){const e=JSON.stringify(this.allMenus$.value);this.appearance.setConfig("menus",e),this.appearance.addChanges({menus:e})}setFromJson(e){if(!e)return;const t=JSON.parse(e);if(!t)return;const n=t.map(e=>{const t=new Ge.a(e);return t.items=t.items.map(e=>new Ve(e)),t});this.allMenus$.next(n)}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(M.a),l.Yb(S))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Ne=n("ZfYz"),je=n("sPnx");let Ae=(()=>{class e{constructor(e){this.http=e}get(){return this.http.getWithCache("admin/appearance/menu-categories")}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(je.a))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Le=n("7EHt");function Ee(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",17),l.bc("click",function(){l.xc(e);const n=t.$implicit;return l.fc().addRouteMenuItem(n)}),l.Ic(1),l.Tb()}if(2&e){const e=t.$implicit;l.Cb(1),l.Kc(" ",e," ")}}function Re(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",17),l.bc("click",function(){l.xc(e);const n=t.$implicit;return l.fc(2).addCustomMenuItem(n)}),l.Ic(1),l.Tb()}if(2&e){const e=t.$implicit;l.Cb(1),l.Jc(e.label)}}function qe(e,t){if(1&e&&(l.Ub(0,"mat-expansion-panel",5),l.Ub(1,"mat-expansion-panel-header"),l.Ub(2,"mat-panel-title",6),l.Ic(3),l.Tb(),l.Tb(),l.Ub(4,"div",14),l.Gc(5,Re,2,1,"div",15),l.Tb(),l.Tb()),2&e){const e=t.$implicit;l.Cb(3),l.Jc(e.name),l.Cb(2),l.mc("ngForOf",e.items)}}let ze=(()=>{class e{constructor(e,t,n,i,a){this.editor=e,this.appearance=t,this.overlayPanelRef=n,this.fb=i,this.itemCategories=a,this.linkForm=this.fb.group({action:[""],label:[""]})}ngOnInit(){this.itemCategories.get().subscribe(e=>{this.menuItemCategories=e.categories})}addLinkMenuItem(){this.editor.addItem(new Ve({type:"link",label:this.linkForm.value.label,action:this.linkForm.value.action})),this.linkForm.reset(),this.close()}addRouteMenuItem(e){this.editor.addItem(new Ve({type:"route",label:e,action:e})),this.close()}addCustomMenuItem(e){this.editor.addItem(new Ve(e)),this.close()}close(){this.overlayPanelRef.close()}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(De),l.Ob(S),l.Ob(Ne.a),l.Ob(a.f),l.Ob(Ae))},e.\u0275cmp=l.Ib({type:e,selectors:[["add-menu-item-panel"]],decls:30,vars:3,consts:[[1,"header"],["trans","",1,"title"],["svgIcon","close",3,"click"],[1,"new-item-tabs"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"mat-elevation-z"],["trans",""],[1,"many-inputs","expansion-panel-content"],[1,"input-container"],["for","external-link-url","trans",""],["type","url","id","external-link-url","formControlName","action","required",""],["for","external-link-text","trans",""],["type","text","id","external-link-text","formControlName","label","required",""],["mat-button","","color","accent","type","submit","trans",""],[1,"items-list","expansion-panel-content"],["class","item",3,"click",4,"ngFor","ngForOf"],["class","mat-elevation-z",4,"ngFor","ngForOf"],[1,"item",3,"click"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"span",1),l.Ic(2,"New Menu Item"),l.Tb(),l.Ub(3,"mat-icon",2),l.bc("click",function(){return t.close()}),l.Tb(),l.Tb(),l.Ub(4,"div",3),l.Ub(5,"mat-accordion"),l.Ub(6,"form",4),l.bc("ngSubmit",function(){return t.addLinkMenuItem()}),l.Ub(7,"mat-expansion-panel",5),l.Ub(8,"mat-expansion-panel-header"),l.Ub(9,"mat-panel-title",6),l.Ic(10,"Link"),l.Tb(),l.Tb(),l.Ub(11,"div",7),l.Ub(12,"div",8),l.Ub(13,"label",9),l.Ic(14,"URL"),l.Tb(),l.Pb(15,"input",10),l.Tb(),l.Ub(16,"div",8),l.Ub(17,"label",11),l.Ic(18,"Link Text"),l.Tb(),l.Pb(19,"input",12),l.Tb(),l.Tb(),l.Ub(20,"mat-action-row"),l.Ub(21,"button",13),l.Ic(22,"\u6dfb\u52a0"),l.Tb(),l.Tb(),l.Tb(),l.Tb(),l.Ub(23,"mat-expansion-panel",5),l.Ub(24,"mat-expansion-panel-header"),l.Ub(25,"mat-panel-title",6),l.Ic(26,"Route"),l.Tb(),l.Tb(),l.Ub(27,"div",14),l.Gc(28,Ee,2,1,"div",15),l.Tb(),l.Tb(),l.Gc(29,qe,6,2,"mat-expansion-panel",16),l.Tb(),l.Tb()),2&e&&(l.Cb(6),l.mc("formGroup",t.linkForm),l.Cb(22),l.mc("ngForOf",t.appearance.config.menus.availableRoutes),l.Cb(1),l.mc("ngForOf",t.menuItemCategories))},directives:[D.a,G.a,Le.a,a.t,a.k,Le.c,Le.e,Le.f,a.c,a.s,a.i,a.A,Le.d,N.b,i.n],styles:["[_nghost-%COMP%]{background-color:var(--be-background-alternative);box-shadow:0 3px 3px -2px rgba(0,0,0,.2),0 3px 4px 0 rgba(0,0,0,.14),0 1px 8px 0 rgba(0,0,0,.12);overflow:hidden;width:300px;border-radius:4px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--be-background);padding:15px;font-size:1.7rem;font-weight:300;border-bottom:1px solid var(--be-divider-default);margin-bottom:10px}.header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:var(--be-secondary-text);margin-left:auto}.new-item-tabs[_ngcontent-%COMP%]{padding:10px}.items-list[_ngcontent-%COMP%]{overflow:auto;max-height:300px}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:var(--be-link);padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid var(--be-divider-default);cursor:pointer}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{text-decoration:underline}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);margin-bottom:10px}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.expansion-panel-content[_ngcontent-%COMP%]{padding-top:25px}"],changeDetection:0}),e})();function He(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",2),l.bc("click",function(){l.xc(e);const n=t.$implicit;return l.fc().selectIcon(n)}),l.Pb(1,"mat-icon",3),l.Tb()}if(2&e){const e=t.$implicit;l.Cb(1),l.mc("svgIcon",e)}}let Je=(()=>{class e{constructor(e,t){this.http=e,this.overlayPanelRef=t,this.icons$=new x.a([]),this.loading$=new x.a(!1),this.iconSelected=new l.n}ngOnInit(){this.loading$.next(!0),this.http.get("admin/icons").pipe(Object(P.a)(()=>this.loading$.next(!1))).subscribe(e=>{this.icons$.next(e.icons)})}selectIcon(e){this.iconSelected.observers.length?this.iconSelected.next(e):(this.overlayPanelRef.emitValue(e),this.overlayPanelRef.close())}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(je.a),l.Ob(Ne.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["icon-selector"]],outputs:{iconSelected:"iconSelected"},decls:4,vars:6,consts:[["mat-icon-button","",3,"click",4,"ngFor","ngForOf"],[1,"overlay","overlay-partial",3,"isVisible"],["mat-icon-button","",3,"click"],[3,"svgIcon"]],template:function(e,t){1&e&&(l.Gc(0,He,2,1,"button",0),l.gc(1,"async"),l.Pb(2,"loading-indicator",1),l.gc(3,"async")),2&e&&(l.mc("ngForOf",l.hc(1,2,t.icons$)),l.Cb(2),l.mc("isVisible",l.hc(3,4,t.loading$)))},directives:[i.n,ye.a,N.b,G.a],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block;background-color:var(--be-background);padding:15px;border-radius:4px;width:490px;max-width:90vw;min-height:390px;overflow:auto;position:relative;text-align:center;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}.mat-icon-button[_ngcontent-%COMP%]{transition:transform .1s ease-in-out}.mat-icon-button[_ngcontent-%COMP%]:hover{transform:scale(1.6)}"],changeDetection:0}),e})();function We(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-expansion-panel",5),l.bc("opened",function(){l.xc(e);const n=t.$implicit;return l.fc(2).toggleMenuItem(n)})("closed",function(){l.xc(e);const n=t.$implicit;return l.fc(2).toggleMenuItem(n)}),l.Ub(1,"mat-expansion-panel-header"),l.Ub(2,"mat-panel-title"),l.Pb(3,"mat-icon",6),l.Ub(4,"span",7),l.Ic(5),l.Tb(),l.Tb(),l.Tb(),l.Ub(6,"div",8),l.Ub(7,"div",9),l.Ub(8,"label",10),l.Ic(9,"Label"),l.Tb(),l.Ub(10,"input",11),l.bc("ngModelChange",function(e){return t.$implicit.label=e})("ngModelChange",function(){return l.xc(e),l.fc(2).menus.commitChanges()}),l.Tb(),l.Tb(),l.Ub(11,"div",9),l.Ub(12,"label",10),l.Ic(13,"Type"),l.Tb(),l.Ub(14,"select",12),l.bc("ngModelChange",function(e){return t.$implicit.type=e})("ngModelChange",function(){return l.xc(e),l.fc(2).menus.commitChanges()}),l.Ub(15,"option",13),l.Ic(16,"Link"),l.Tb(),l.Ub(17,"option",14),l.Ic(18,"Route"),l.Tb(),l.Ub(19,"option",15),l.Ic(20,"Page"),l.Tb(),l.Tb(),l.Tb(),l.Ub(21,"div",9),l.Ub(22,"label",10),l.Ic(23,"Action"),l.Tb(),l.Ub(24,"input",11),l.bc("ngModelChange",function(e){return t.$implicit.action=e})("ngModelChange",function(){return l.xc(e),l.fc(2).menus.commitChanges()}),l.Tb(),l.Tb(),l.Ub(25,"div",9),l.Ub(26,"label",10),l.Ic(27,"Condition"),l.Tb(),l.Ub(28,"select",12),l.bc("ngModelChange",function(e){return t.$implicit.condition=e})("ngModelChange",function(){return l.xc(e),l.fc(2).menus.commitChanges()}),l.Ub(29,"option",16),l.Ic(30,"None"),l.Tb(),l.Ub(31,"option",17),l.Ic(32,"Show to Logged in Users Only"),l.Tb(),l.Ub(33,"option",18),l.Ic(34,"Show to Guest Users Only"),l.Tb(),l.Ub(35,"option",19),l.Ic(36,"Show to Admin Only"),l.Tb(),l.Tb(),l.Tb(),l.Ub(37,"div",9),l.Ub(38,"label",10),l.Ic(39,"Open link in"),l.Tb(),l.Ub(40,"select",12),l.bc("ngModelChange",function(e){return t.$implicit.target=e})("ngModelChange",function(){return l.xc(e),l.fc(2).menus.commitChanges()}),l.Ub(41,"option",20),l.Ic(42,"Same Window"),l.Tb(),l.Ub(43,"option",21),l.Ic(44,"New Window"),l.Tb(),l.Tb(),l.Tb(),l.Ub(45,"div",22,23),l.bc("click",function(){l.xc(e);const n=t.$implicit,i=l.uc(46);return l.fc(2).openIconSelector(i,n)}),l.Ub(47,"label",10),l.Ic(48,"Icon"),l.Tb(),l.Ub(49,"input",24),l.bc("ngModelChange",function(e){return t.$implicit.icon=e}),l.Tb(),l.Pb(50,"mat-icon",25),l.Tb(),l.Tb(),l.Ub(51,"mat-action-row"),l.Ub(52,"button",26),l.bc("click",function(){return l.xc(e),l.fc(2).confirmMenuItemDeletion()}),l.Ic(53,"Remove"),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit;l.Db("data-id",e.id),l.Cb(5),l.Jc(e.label),l.Cb(3),l.nc("for",e.id+"-label"),l.Cb(2),l.nc("id",e.id+"-label"),l.mc("ngModel",e.label),l.Cb(2),l.nc("for",e.id+"-type"),l.Cb(2),l.nc("id",e.id+"-type"),l.mc("ngModel",e.type),l.Cb(8),l.nc("for",e.id+"-action"),l.Cb(2),l.nc("id",e.id+"-action"),l.mc("ngModel",e.action),l.Cb(2),l.nc("for",e.id+"-condition"),l.Cb(2),l.nc("id",e.id+"-condition"),l.mc("ngModel",e.condition),l.Cb(1),l.mc("ngValue",null),l.Cb(9),l.nc("for",e.id+"-target"),l.Cb(2),l.nc("id",e.id+"-target"),l.mc("ngModel",e.target),l.Cb(7),l.nc("for",e.id+"-icon"),l.Cb(2),l.nc("id",e.id+"-icon"),l.mc("ngModel",e.icon),l.Cb(1),l.mc("svgIcon",e.icon)}}function Be(e,t){if(1&e){const e=l.Vb();l.Ub(0,"mat-accordion",3),l.bc("cdkDropListDropped",function(t){return l.xc(e),l.fc().reorderMenuItems(t)}),l.Gc(1,We,54,22,"mat-expansion-panel",4),l.Tb()}if(2&e){const e=t.ngIf;l.Cb(1),l.mc("ngForOf",e.items)}}function Ye(e,t){1&e&&(l.Ub(0,"div",27),l.Ic(1,"This menu has no items yet."),l.Tb())}let Ke=(()=>{class e{constructor(e,t,n,i){this.menus=e,this.modal=t,this.overlayPanel=n,this.cd=i,this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(e=>{e&&e.unsubscribe()})}reorderMenuItems(e){this.menus.reorderActiveMenuItems(e.previousIndex,e.currentIndex)}toggleMenuItem(e){this.selectedMenuItem=this.selectedMenuItem===e?null:e}confirmMenuItemDeletion(){this.modal.show(ve.a,{title:"Delete Menu Item",body:"Are you sure you want to delete this menu item?",ok:"Delete"}).afterClosed().subscribe(e=>{e&&(this.menus.removeItem(this.selectedMenuItem),this.selectedMenuItem=null)})}openIconSelector(e,t){this.overlayPanel.open(Je,{position:Se.a,origin:new l.l(e)}).valueChanged().subscribe(e=>{t.icon=e,this.menus.commitChanges(),this.cd.detectChanges()})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(De),l.Ob(Ce.a),l.Ob(Te.a),l.Ob(l.h))},e.\u0275cmp=l.Ib({type:e,selectors:[["menu-items"]],decls:6,vars:4,consts:[["trans","",1,"title"],["cdkDropList","",3,"cdkDropListDropped",4,"ngIf","ngIfElse"],["noActiveMenu",""],["cdkDropList","",3,"cdkDropListDropped"],["class","mat-elevation-z menu-item-container","cdkDrag","",3,"opened","closed",4,"ngFor","ngForOf"],["cdkDrag","",1,"mat-elevation-z","menu-item-container",3,"opened","closed"],["cdkDragHandle","","svgIcon","drag-handle",1,"drag-handle"],[1,"name"],[1,"many-inputs","menu-item-list"],[1,"input-container"],["trans","",3,"for"],["type","text",3,"ngModel","id","ngModelChange"],[3,"ngModel","id","ngModelChange"],["value","link","trans",""],["value","route","trans",""],["value","page","trans",""],["trans","",3,"ngValue"],["value","auth","trans",""],["value","guest","trans",""],["value","admin","trans",""],["value","_self","trans",""],["value","_blank","trans",""],[1,"input-container","icon-input-container",3,"click"],["iconInput",""],["type","text","readonly","","placeholder","(Optional)","trans-placeholder","",3,"ngModel","id","ngModelChange"],[3,"svgIcon"],["mat-button","","color","warn","trans","",1,"delete-button",3,"click"],["trans","",1,"no-menu-items"]],template:function(e,t){if(1&e&&(l.Ub(0,"div",0),l.Ic(1,"Menu Items"),l.Tb(),l.Gc(2,Be,2,1,"mat-accordion",1),l.gc(3,"async"),l.Gc(4,Ye,2,0,"ng-template",null,2,l.Hc)),2&e){const e=l.uc(5);l.Cb(2),l.mc("ngIf",l.hc(3,2,t.menus.activeMenu$))("ngIfElse",e)}},directives:[D.a,i.o,Le.a,Fe.c,i.n,Le.c,Fe.a,Le.e,Le.f,G.a,Fe.b,a.c,a.s,a.v,a.B,a.w,a.D,Le.d,N.b],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{margin:35px 0 5px}.no-menu-items[_ngcontent-%COMP%]{font-size:1.6rem;font-style:italic;color:var(--be-secondary-text);margin:10px 0}.icon-input-container[_ngcontent-%COMP%]{position:relative}.icon-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:35px}.icon-input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:36px;left:8px;color:var(--be-secondary-text)}.menu-item-list[_ngcontent-%COMP%]{padding-top:25px}.mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:4px;border:1px solid var(--be-divider-default)}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.mat-action-row[_ngcontent-%COMP%]{border:none;padding:0 15px 10px}.drag-handle[_ngcontent-%COMP%]{display:block;color:var(--be-secondary-text);margin-right:8px;cursor:move}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),e})();function Qe(e,t){if(1&e&&(l.Ub(0,"option",15),l.Ic(1),l.Tb()),2&e){const e=t.$implicit,n=l.fc(2);l.mc("ngValue",e),l.Cb(1),l.Kc(" ",n.getDisplayName(e)," ")}}function Xe(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",4),l.Ub(1,"div",5),l.Ub(2,"div",6),l.Ub(3,"label",7),l.Ic(4,"Menu Name"),l.Tb(),l.Ub(5,"input",8),l.bc("ngModelChange",function(e){return t.ngIf.name=e})("ngModelChange",function(){return l.xc(e),l.fc().menus.commitChanges()}),l.Tb(),l.Tb(),l.Ub(6,"div",6),l.Ub(7,"label",9),l.Ic(8,"Menu Position"),l.Tb(),l.Ub(9,"select",10),l.bc("ngModelChange",function(e){return t.ngIf.position=e})("ngModelChange",function(){return l.xc(e),l.fc().menus.commitChanges()}),l.Gc(10,Qe,2,2,"option",11),l.Tb(),l.Tb(),l.Tb(),l.Pb(11,"menu-items"),l.Ub(12,"div",12),l.Ub(13,"button",13),l.bc("click",function(){return l.xc(e),l.fc().confirmMenuDeletion()}),l.Ic(14,"Delete Menu"),l.Tb(),l.Ub(15,"button",14),l.bc("click",function(){return l.xc(e),l.fc().openAddItemPanel()}),l.Ic(16," Add Item "),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.ngIf,n=l.fc();l.Cb(5),l.mc("ngModel",e.name),l.Cb(4),l.mc("ngModel",e.position),l.Cb(1),l.mc("ngForOf",n.appearance.config.menus.positions)}}function Ze(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",19),l.bc("click",function(){l.xc(e);const n=t.$implicit;return l.fc(2).setActiveMenu(n)}),l.Ub(1,"span",20),l.Ic(2),l.Tb(),l.Pb(3,"mat-icon",21),l.Tb()}if(2&e){const e=t.$implicit;l.Cb(2),l.Jc(e.name)}}function et(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",16),l.Gc(1,Ze,4,1,"div",17),l.gc(2,"async"),l.Ub(3,"div",12),l.Ub(4,"button",18),l.bc("click",function(){return l.xc(e),l.fc().menus.create()}),l.Ic(5,"Add a Menu"),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=l.fc();l.Cb(1),l.mc("ngForOf",l.hc(2,1,e.menus.allMenus$))}}const tt=function(e){return["Menus",e]};let nt=(()=>{class e{constructor(e,t,n,i,a,o){this.appearance=e,this.menus=t,this.modal=n,this.settings=i,this.panel=a,this.el=o,this.menus.setFromJson(this.settings.get("menus"))}openAddItemPanel(){const e=Se.a.slice();e[0].offsetX=10,e[1].offsetX=10,this.panel.open(ze,{position:e,origin:this.el,panelClass:"add-menu-item-panel-container"})}openPreviousPanel(){this.menus.activeMenu$.value?this.menus.activeMenu$.next(null):this.appearance.closeActivePanel()}setActiveMenu(e){this.menus.activeMenu$.next(e)}confirmMenuDeletion(){this.modal.show(ve.a,{title:"Delete Menu",body:"Are you sure you want to delete this menu?",ok:"Delete"}).afterClosed().subscribe(e=>{e&&this.menus.deleteActive()})}getDisplayName(e){return e.replace(/-/g," ")}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(S),l.Ob(De),l.Ob(Ce.a),l.Ob(M.a),l.Ob(Te.a),l.Ob(l.l))},e.\u0275cmp=l.Ib({type:e,selectors:[["menus-appearance-panel"]],decls:6,vars:7,consts:[[3,"path","back"],[1,"appearance-panel-content"],["class","menu-panel",4,"ngIf","ngIfElse"],["allMenuList",""],[1,"menu-panel"],[1,"many-inputs","menu-settings"],[1,"input-container"],["for","menu-name","trans",""],["type","text","id","menu-name",3,"ngModel","ngModelChange"],["for","menu-position","trans",""],["id","menu-position",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-button","","color","warn","trans","",3,"click"],["mat-button","","color","accent","trans","",1,"button","flat","add-item-button",3,"click"],[3,"ngValue"],[1,"menus"],["class","menu nav-item",3,"click",4,"ngFor","ngForOf"],["mat-button","","color","accent","trans","",1,"button","primary",3,"click"],[1,"menu","nav-item",3,"click"],[1,"name"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(e,t){if(1&e&&(l.Ub(0,"appearance-panel-meta",0),l.bc("back",function(){return t.openPreviousPanel()}),l.Tb(),l.Ub(1,"div",1),l.Gc(2,Xe,17,3,"div",2),l.gc(3,"async"),l.Gc(4,et,6,3,"ng-template",null,3,l.Hc),l.Tb()),2&e){const e=l.uc(5);l.mc("path",l.qc(5,tt,t.menus.activeMenu$.value&&t.menus.activeMenu$.value.name)),l.Cb(2),l.mc("ngIf",l.hc(3,3,t.menus.activeMenu$))("ngIfElse",e)}},directives:[R,i.o,D.a,a.c,a.s,a.v,a.B,i.n,Ke,N.b,a.w,a.D,G.a],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block}.menu-settings[_ngcontent-%COMP%]{margin:10px 0}.menu-settings[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-transform:capitalize}.action-buttons[_ngcontent-%COMP%]{text-align:right;margin:10px 0}"],changeDetection:0}),e})();function it(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"div",3),l.Ub(2,"label",4),l.Ic(3),l.Tb(),l.Pb(4,"textarea",5),l.Tb(),l.Rb()),2&e){const e=t.$implicit;l.Cb(2),l.mc("for",e.key),l.Cb(1),l.Jc(e.name),l.Cb(1),l.mc("id",e.key)("formControlName",e.key)("placeholder",e.defaultValue)}}const at=function(){return["Seo Settings"]};let ot=(()=>{class e{constructor(e,t){this.editor=e,this.fb=t,this.form=this.fb.group({})}ngOnInit(){this.seoFields=this.editor.defaultSettings.seo_fields,this.seoFields.forEach(e=>{this.form.addControl(e.key,this.fb.control(e.value))}),this.form.valueChanges.subscribe(e=>{this.editor.addChanges(e)})}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(S),l.Ob(a.f))},e.\u0275cmp=l.Ib({type:e,selectors:[["seo-appearance-panel"]],decls:3,vars:4,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"input-container"],["trans","",3,"for"],["type","text","rows","2",3,"id","formControlName","placeholder"]],template:function(e,t){1&e&&(l.Ub(0,"appearance-panel-meta",0),l.bc("back",function(){return t.editor.closeActivePanel()}),l.Tb(),l.Ub(1,"div",1),l.Gc(2,it,5,5,"ng-container",2),l.Tb()),2&e&&(l.mc("path",l.pc(3,at)),l.Cb(1),l.mc("formGroup",t.form),l.Cb(1),l.mc("ngForOf",t.seoFields))},directives:[R,a.t,a.k,i.n,D.a,a.c,a.s,a.i],styles:["label[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),e})();var ct=n("FtGj"),rt=n("5o4b");const st=["editor"];function lt(e,t){1&e&&(l.Ub(0,"p",11),l.Ic(1," If entering javascript, wrap it with <script><\/script> tag. "),l.Tb())}let bt=(()=>{class e{constructor(e,t,n,i){this.settings=e,this.dialogRef=t,this.data=n,this.lazyLoader=i,this.loading$=new x.a(!1),this.syntaxInvalid$=new x.a(!1)}ngOnInit(){this.initEditor(this.data.contents,this.data.language),this.overrideDialogCloseEvents()}confirm(){this.close(this.editor.getValue())}close(e){this.dialogRef.close(e)}initEditor(e,t="html"){this.loading$.next(!0),this.lazyLoader.loadAsset("https://cdn.jsdelivr.net/npm/ace-builds@1.4.12/src-min/ace.js",{type:"js"}).then(()=>{this.editor=ace.edit(this.editorEl.nativeElement),this.editor.getSession().setMode("ace/mode/"+t),this.editor.setTheme("ace/theme/chrome"),this.editor.$blockScrolling=1/0,e&&this.editor.setValue(e,1),this.editor.getSession().on("changeAnnotation",()=>{const e=this.editor.getSession().getAnnotations();if(e[0]&&/doctype first/.test(e[0].text))return e.splice(0,1),void this.editor.getSession().setAnnotations(e);const t=this.editor.getSession().getAnnotations().filter(e=>"error"===e.type).length>0;this.syntaxInvalid$.next(t)}),this.loading$.next(!1)})}overrideDialogCloseEvents(){this.dialogRef.disableClose=!0,this.dialogRef.backdropClick().subscribe(()=>{this.close()}),this.dialogRef.keydownEvents().pipe(Object(O.a)(e=>e.keyCode===ct.g)).subscribe(()=>this.close())}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(M.a),l.Ob(se.g),l.Ob(se.a),l.Ob(rt.a))},e.\u0275cmp=l.Ib({type:e,selectors:[["code-editor-modal"]],viewQuery:function(e,t){if(1&e&&l.Nc(st,3),2&e){let e;l.tc(e=l.cc())&&(t.editorEl=e.first)}},decls:18,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",1,"modal-title"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],[1,"editor-container"],["class","info","trans","",4,"ngIf"],[1,"editor"],["editor",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled","click"],[1,"overlay",3,"isVisible"],["trans","",1,"info"]],template:function(e,t){1&e&&(l.Ub(0,"div",0),l.Ub(1,"h2",1),l.Ic(2,"Code Editor"),l.Tb(),l.Ub(3,"button",2),l.bc("click",function(){return t.close()}),l.Pb(4,"mat-icon",3),l.Tb(),l.Tb(),l.Ub(5,"mat-dialog-content"),l.Ub(6,"div",4),l.Gc(7,lt,2,0,"p",5),l.Pb(8,"div",6,7),l.Tb(),l.Tb(),l.Ub(10,"mat-dialog-actions"),l.Ub(11,"button",8),l.bc("click",function(){return t.close()}),l.Ic(12,"Cancel"),l.Tb(),l.Ub(13,"button",9),l.bc("click",function(){return t.confirm()}),l.gc(14,"async"),l.Ic(15," Update "),l.Tb(),l.Tb(),l.Pb(16,"loading-indicator",10),l.gc(17,"async")),2&e&&(l.Cb(7),l.mc("ngIf","html"===t.data.language),l.Cb(6),l.mc("disabled",l.hc(14,3,t.syntaxInvalid$)),l.Cb(3),l.mc("isVisible",l.hc(17,5,t.loading$)))},directives:[se.h,D.a,G.a,se.e,i.o,se.c,N.b,ye.a],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block;width:800px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin:0 0 15px}.editor[_ngcontent-%COMP%]{min-height:550px;border:1px solid var(--be-divider-default);font-size:1.4rem}.info[_ngcontent-%COMP%]{color:var(--be-secondary-text)}"],changeDetection:0}),e})();const ut=function(){return["Custom Code"]};let dt=(()=>{class e{constructor(e,t,n,i){this.editor=e,this.fb=t,this.modal=n,this.toast=i,this.form=this.fb.group({"custom-code.css":[""],"custom-code.html":[""]})}ngOnInit(){const e={};Object.keys(this.form.controls).forEach(t=>{e[t]=this.editor.currentValue(t)}),this.form.patchValue(e)}openModal(e){const t="custom-code."+e,n=this.form.value[t]||"";this.modal.open(bt,{contents:this.form.value[t],language:e}).afterClosed().subscribe(i=>{if(void 0===i||n===i)return;const a={[t]:i};this.form.patchValue(a),this.editor.saveChanges(a).subscribe(()=>{this.addCodeToPreview(e,i),this.toast.open("Custom code saved")})})}addCodeToPreview(e,t){this.editor.postMessage("css"===e?new v(t):new C(t))}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(S),l.Ob(a.f),l.Ob(Ce.a),l.Ob(_.b))},e.\u0275cmp=l.Ib({type:e,selectors:[["custom-code-appearance-panel"]],decls:12,vars:2,consts:[[3,"path","back"],[1,"appearance-panel-content"],["type","button",1,"nav-item",3,"click"],["trans","",1,"text"],["trans","",1,"actions"],[1,"nav-item",3,"click"]],template:function(e,t){1&e&&(l.Ub(0,"appearance-panel-meta",0),l.bc("back",function(){return t.editor.closeActivePanel()}),l.Tb(),l.Ub(1,"div",1),l.Ub(2,"button",2),l.bc("click",function(){return t.openModal("css")}),l.Ub(3,"span",3),l.Ic(4,"Custom CSS"),l.Tb(),l.Ub(5,"span",4),l.Ic(6,"Modify"),l.Tb(),l.Tb(),l.Ub(7,"button",5),l.bc("click",function(){return t.openModal("html")}),l.Ub(8,"span",3),l.Ic(9,"Custom HTML & Javascript"),l.Tb(),l.Ub(10,"span",4),l.Ic(11,"Modify"),l.Tb(),l.Tb(),l.Tb()),2&e&&l.mc("path",l.pc(1,ut))},directives:[R,D.a],styles:[".actions[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem}"],changeDetection:0}),e})();const pt=["iframe"];function ht(e,t){1&e&&(l.Ub(0,"span",15),l.Ic(1,"Save"),l.Tb())}function mt(e,t){1&e&&(l.Ub(0,"span",15),l.Ic(1,"Saved"),l.Tb())}function gt(e,t){1&e&&l.Pb(0,"general-appearance-panel")}function ft(e,t){1&e&&l.Pb(0,"themes-appearance-panel")}function vt(e,t){1&e&&l.Pb(0,"menus-appearance-panel")}function Ct(e,t){1&e&&l.Pb(0,"seo-appearance-panel")}function yt(e,t){1&e&&l.Pb(0,"custom-code-appearance-panel")}function xt(e,t){}function It(e,t){1&e&&l.Gc(0,xt,0,0,"ng-template",20),2&e&&l.mc("cdkPortalOutlet",t.ngIf)}function Tt(e,t){if(1&e&&(l.Sb(0),l.Gc(1,It,1,1,void 0,19),l.gc(2,"async"),l.Rb()),2&e){const e=l.fc(2);l.Cb(1),l.mc("ngIf",l.hc(2,1,e.panelPortal$))}}function Ot(e,t){if(1&e&&(l.Sb(0),l.Sb(1,16),l.Gc(2,gt,1,0,"general-appearance-panel",17),l.Gc(3,ft,1,0,"themes-appearance-panel",17),l.Gc(4,vt,1,0,"menus-appearance-panel",17),l.Gc(5,Ct,1,0,"seo-appearance-panel",17),l.Gc(6,yt,1,0,"custom-code-appearance-panel",17),l.Gc(7,Tt,3,3,"ng-container",18),l.Rb(),l.Rb()),2&e){const e=t.ngIf;l.Cb(1),l.mc("ngSwitch",e.name),l.Cb(1),l.mc("ngSwitchCase","general"),l.Cb(1),l.mc("ngSwitchCase","themes"),l.Cb(1),l.mc("ngSwitchCase","menus"),l.Cb(1),l.mc("ngSwitchCase","seo-settings"),l.Cb(1),l.mc("ngSwitchCase","custom-code")}}const Pt=function(){return[]},kt=function(e){return{panel:e}};function Ut(e,t){if(1&e&&(l.Ub(0,"a",23),l.Ub(1,"span",24),l.Ic(2),l.Tb(),l.Pb(3,"mat-icon",25),l.Tb()),2&e){const e=t.$implicit,n=l.fc(2);l.mc("routerLink",l.pc(3,Pt))("queryParams",l.qc(4,kt,n.slugify(e.name))),l.Cb(2),l.Jc(n.viewName(e.name))}}function wt(e,t){if(1&e&&(l.Ub(0,"div",21),l.Gc(1,Ut,4,6,"a",22),l.Tb()),2&e){const e=l.fc();l.Cb(1),l.mc("ngForOf",e.editor.config.sections)}}let Mt=(()=>{class e{constructor(e,t,n,i,a){this.editor=e,this.router=t,this.route=n,this.breakpoints=i,this.config=a,this.leftColumnIsHidden=!1,this.panelPortal$=this.editor.activePanel$.pipe(Object(s.a)(e=>e&&e.component?new r.d(e.component):null))}ngOnInit(){this.leftColumnIsHidden=this.breakpoints.isMobile$.value,this.editor.init(this.iframe.nativeElement,this.route.snapshot.data.defaultSettings,this.config),this.routerSub=this.route.queryParams.subscribe(e=>{this.editor.openPanel(e.panel)})}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe()}closeEditor(){this.router.navigate(["admin"])}slugify(e){return Object(c.a)(e)}viewName(e){return e.replace("-"," ")}toggleLeftSidebar(){this.leftColumnIsHidden=!this.leftColumnIsHidden}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(S),l.Ob(o.e),l.Ob(o.a),l.Ob(V.a),l.Ob(b,8))},e.\u0275cmp=l.Ib({type:e,selectors:[["appearance"]],viewQuery:function(e,t){if(1&e&&l.Nc(pt,3),2&e){let e;l.tc(e=l.cc())&&(t.iframe=e.first)}},decls:25,vars:17,consts:[[1,"sidebar",3,"opened","mode"],[1,"header"],[1,"back-button",3,"click"],["svgIcon","close"],["trans","",1,"title"],["mat-raised-button","","color","accent",1,"button","primary","save-button",3,"disabled","click"],["trans","",4,"ngIf","ngIfElse"],["saved",""],[4,"ngIf","ngIfElse"],["navigation",""],[1,"live-preview"],["src","about:blank"],["iframe",""],["mat-fab","",1,"sidebar-toggle-button",3,"click"],["svgIcon","edit"],["trans",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],[3,"cdkPortalOutlet"],[1,"root-navigation"],["class","nav-item",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"nav-item",3,"routerLink","queryParams"],["trans","",1,"text"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(e,t){if(1&e&&(l.Ub(0,"mat-sidenav-container"),l.Ub(1,"mat-sidenav",0),l.gc(2,"async"),l.Ub(3,"div",1),l.Ub(4,"div",2),l.bc("click",function(){return t.closeEditor()}),l.Pb(5,"mat-icon",3),l.Tb(),l.Ub(6,"div",4),l.Ic(7,"Appearance Editor"),l.Tb(),l.Ub(8,"button",5),l.bc("click",function(){return t.editor.saveChanges()}),l.gc(9,"async"),l.gc(10,"async"),l.Gc(11,ht,2,0,"span",6),l.gc(12,"async"),l.Gc(13,mt,2,0,"ng-template",null,7,l.Hc),l.Tb(),l.Tb(),l.Gc(15,Ot,8,6,"ng-container",8),l.gc(16,"async"),l.Gc(17,wt,2,1,"ng-template",null,9,l.Hc),l.Tb(),l.Ub(19,"mat-sidenav-content"),l.Ub(20,"div",10),l.Pb(21,"iframe",11,12),l.Tb(),l.Tb(),l.Tb(),l.Ub(23,"button",13),l.bc("click",function(){return t.toggleLeftSidebar()}),l.Pb(24,"mat-icon",14),l.Tb()),2&e){const e=l.uc(14),n=l.uc(18);l.Cb(1),l.mc("opened",!t.leftColumnIsHidden)("mode",l.hc(2,7,t.breakpoints.isMobile$)?"over":"side"),l.Cb(7),l.mc("disabled",!l.hc(9,9,t.editor.changes$)||l.hc(10,11,t.editor.loading$)),l.Cb(3),l.mc("ngIf",l.hc(12,13,t.editor.changes$))("ngIfElse",e),l.Cb(4),l.mc("ngIf",l.hc(16,15,t.editor.activePanel$))("ngIfElse",n)}},directives:[F.e,F.d,G.a,D.a,N.b,i.o,F.f,i.q,i.r,i.s,re,_e,nt,ot,dt,r.c,i.n,o.h],pipes:[i.b],styles:[".mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}.sidebar-toggle-button[_ngcontent-%COMP%]{display:none;position:fixed;bottom:15px;right:15px;z-index:3}.sidebar[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);width:330px;background-color:var(--be-background-alternative)}.sidebar[_ngcontent-%COMP%]   .root-navigation[_ngcontent-%COMP%]{padding:10px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:10px;border-bottom:1px solid var(--be-divider-default);height:50px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:10px;font-size:1.7rem;font-weight:300}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{margin-left:auto;max-height:36px;box-shadow:none}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{cursor:default}.live-preview[_ngcontent-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center;flex:1 1 auto;position:relative}.live-preview[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border:none;width:100%;height:100%}@media screen and (max-width:768px){.sidebar-toggle-button[_ngcontent-%COMP%]{display:block}}"],changeDetection:0}),e})(),$t=(()=>{class e{constructor(e,t){this.editor=e,this.modal=t}canDeactivate(){return!this.editor.changes$.value||this.modal.show(ve.a,{title:"Close Appearance Editor",body:"Are you sure you want to close appearance editor?",bodyBold:"All unsaved changes will be lost.",ok:"Close",cancel:"Stay"}).afterClosed()}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(S),l.Yb(Ce.a))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var _t=n("0QyJ"),St=n("JIr8"),Vt=n("5+tZ"),Ft=n("EY2u"),Gt=n("LRne");const Dt=[{path:"",component:Mt,data:{permissions:["appearance.update"]},resolve:{defaultSettings:(()=>{class e{constructor(e,t){this.router=e,this.http=t}resolve(e,t){return this.http.get("admin/appearance/values").pipe(Object(St.a)(()=>(this.router.navigate(["/admin"]),Ft.a)),Object(Vt.a)(e=>e?Object(Gt.a)(e):(this.router.navigate(["/admin"]),Ft.a)))}}return e.\u0275fac=function(t){return new(t||e)(l.Yb(o.e),l.Yb($.a))},e.\u0275prov=l.Kb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},canActivate:[_t.a],canDeactivate:[$t],children:[{path:""},{path:":panel"},{path:":panel/:activeItem"}]}];let Nt=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[o.i.forChild(Dt)],o.i]}),e})();var jt=n("X3pI");let At=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[i.c,jt.a,N.c,G.b]]}),e})();var Lt=n("6rvT"),Et=n("MKyN");let Rt=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[i.c,Lt.a,G.b]]}),e})(),qt=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},providers:[{provide:b,useValue:u,multi:!0}],imports:[[Nt,i.c,a.m,a.z,At,Lt.a,Et.a,jt.a,Rt,Y.c,Q.b,G.b,N.c,se.f,Le.b,Fe.e,F.g,r.g,be.b]]}),e})();var zt=n("FKr1");n("8LU1"),n("R1ws"),n("nLfN"),n("quSY"),n("u47x"),n("cH1L");let Ht=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},imports:[[i.c,zt.i],zt.i]}),e})();var Jt=n("/1cH"),Wt=n("Kj3r"),Bt=n("/uUt"),Yt=n("eIep"),Kt=n("hLX6"),Qt=n("dtOA"),Xt=n("zW5C");function Zt(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",10),l.Ub(1,"div",11),l.Ub(2,"div",12),l.Ic(3),l.gc(4,"trans"),l.Tb(),l.Ub(5,"button",13),l.bc("click",function(){l.xc(e);const n=t.index;return l.fc(3).removeFeature("primary",n)}),l.Pb(6,"mat-icon",14),l.Tb(),l.Tb(),l.Ub(7,"div",15),l.Ub(8,"label",16),l.Ic(9,"Title"),l.Tb(),l.Pb(10,"input",17),l.Tb(),l.Ub(11,"div",15),l.Ub(12,"label",16),l.Ic(13,"Subtitle"),l.Tb(),l.Pb(14,"input",18),l.Tb(),l.Ub(15,"appearance-image-input",19),l.Ic(16," Image "),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit,n=t.index,i=l.fc(3);l.mc("formGroup",e),l.Cb(3),l.Lc("",l.hc(4,13,"Feature")," #",n+1,""),l.Cb(5),l.mc("for","primary."+n+".title"),l.Cb(2),l.oc("highlightInPreview",".inline-feature:nth-child(",n+1,") h3"),l.mc("id","primary."+n+".title")("placeholder",i.defaultValue("primaryFeatures."+n+".title")),l.Cb(2),l.mc("for","primary."+n+".subtitle"),l.Cb(2),l.oc("highlightInPreview",".inline-feature:nth-child(",n+1,") p"),l.mc("id","primary."+n+".subtitle")("placeholder",i.defaultValue("primaryFeatures."+n+".subtitle")),l.Cb(1),l.oc("highlightInPreview",".inline-feature:nth-child(",n+1,") img"),l.mc("defaultValue",i.defaultValue("primaryFeatures."+n+".image"))}}function en(e,t){if(1&e){const e=l.Vb();l.Ub(0,"button",20),l.bc("click",function(){return l.xc(e),l.fc(3).addFeature("primary")}),l.Ic(1," \u6dfb\u52a0 "),l.Tb()}}function tn(e,t){if(1&e&&(l.Sb(0),l.Gc(1,Zt,17,15,"div",8),l.Gc(2,en,2,0,"button",9),l.Rb()),2&e){const e=l.fc(2);l.Cb(1),l.mc("ngForOf",e.primaryArray().controls),l.Cb(1),l.mc("ngIf",e.primaryArray().length<3)}}function nn(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",10),l.Ub(1,"div",11),l.Ub(2,"div",12),l.Ic(3),l.gc(4,"trans"),l.Tb(),l.Ub(5,"button",13),l.bc("click",function(){l.xc(e);const n=t.index;return l.fc(3).removeFeature("secondary",n)}),l.Pb(6,"mat-icon",14),l.Tb(),l.Tb(),l.Ub(7,"div",15),l.Ub(8,"label",16),l.Ic(9,"Title"),l.Tb(),l.Pb(10,"input",17),l.Tb(),l.Ub(11,"div",15),l.Ub(12,"label",16),l.Ic(13,"Subtitle"),l.Tb(),l.Pb(14,"input",18),l.Tb(),l.Ub(15,"div",15),l.Ub(16,"label",16),l.Ic(17,"Description"),l.Tb(),l.Pb(18,"textarea",21),l.Tb(),l.Ub(19,"appearance-image-input",22),l.Ic(20,"Image "),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit,n=t.index,i=l.fc(3);l.mc("formGroup",e),l.Cb(3),l.Lc("",l.hc(4,17,"Feature")," #",n+1,""),l.Cb(5),l.mc("for","secondary."+n+".title"),l.Cb(2),l.oc("highlightInPreview",".big-feature:nth-child(",n+1,") h2"),l.mc("id","secondary."+n+".title")("placeholder",i.defaultValue("secondaryFeatures."+n+".title")),l.Cb(2),l.mc("for","secondary."+n+".subtitle"),l.Cb(2),l.oc("highlightInPreview",".big-feature:nth-child(",n+1,") small"),l.mc("id","secondary."+n+".subtitle")("placeholder",i.defaultValue("secondaryFeatures."+n+".subtitle")),l.Cb(2),l.mc("for","secondary."+n+".description"),l.Cb(2),l.oc("highlightInPreview",".big-feature:nth-child(",n+1,") p"),l.mc("id","secondary."+n+".description")("placeholder",i.defaultValue("secondaryFeatures."+n+".description")),l.Cb(1),l.oc("highlightInPreview",".big-feature:nth-child(",n+1,") img"),l.mc("defaultValue",i.defaultValue("secondaryFeatures."+n+".image"))}}function an(e,t){if(1&e){const e=l.Vb();l.Sb(0),l.Gc(1,nn,21,19,"div",8),l.Ub(2,"button",20),l.bc("click",function(){return l.xc(e),l.fc(2).addFeature("secondary")}),l.Ic(3,"\u6dfb\u52a0"),l.Tb(),l.Rb()}if(2&e){const e=l.fc(2);l.Cb(1),l.mc("ngForOf",e.secondaryArray().controls)}}function on(e,t){if(1&e&&(l.Ub(0,"div",23),l.Ub(1,"div",15),l.Ub(2,"label",24),l.Ic(3,"Input Text"),l.Tb(),l.Pb(4,"input",25),l.Tb(),l.Ub(5,"div",15),l.Ub(6,"label",26),l.Ic(7,"Input Button"),l.Tb(),l.Pb(8,"input",27),l.Tb(),l.Ub(9,"div",15),l.Ub(10,"label",28),l.Ic(11,"Call to Action #1"),l.Tb(),l.Pb(12,"input",29),l.Tb(),l.Ub(13,"div",15),l.Ub(14,"label",30),l.Ic(15,"Call to Action #2"),l.Tb(),l.Pb(16,"input",31),l.Tb(),l.Tb()),2&e){const e=l.fc(2);l.mc("formGroup",e.form.get("actions")),l.Cb(4),l.mc("placeholder",e.defaultValue("actions.inputText")),l.Cb(4),l.mc("placeholder",e.defaultValue("actions.inputButton")),l.Cb(4),l.mc("placeholder",e.defaultValue("actions.cta1")),l.Cb(4),l.mc("placeholder",e.defaultValue("actions.cta2"))}}function cn(e,t){if(1&e&&(l.Ub(0,"mat-option",47),l.Ic(1),l.Tb()),2&e){const e=t.$implicit;l.mc("value",e),l.Cb(1),l.Jc(e.name)}}const rn=function(e){return["/admin/channels",e,"edit"]};function sn(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",48),l.Ub(1,"button",49),l.Pb(2,"mat-icon",50),l.Tb(),l.Ub(3,"div",51),l.Ic(4),l.Tb(),l.Ub(5,"div",52),l.Ub(6,"a",53),l.Pb(7,"mat-icon",54),l.Tb(),l.Ub(8,"button",55),l.bc("click",function(){l.xc(e);const n=t.$implicit;return l.fc(3).removeChannel(n)}),l.Pb(9,"mat-icon",56),l.Tb(),l.Tb(),l.Tb()}if(2&e){const e=t.$implicit;l.Cb(4),l.Jc(e.name),l.Cb(2),l.mc("routerLink",l.qc(2,rn,e.id))}}function ln(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",32),l.Ub(1,"div",33),l.Ub(2,"div",15),l.Ub(3,"label",34),l.Ic(4,"Manage Channels"),l.Tb(),l.Ub(5,"div",35),l.Pb(6,"input",36,37),l.Ub(8,"button",38),l.Pb(9,"mat-icon",39),l.Tb(),l.Tb(),l.Tb(),l.Ub(10,"mat-autocomplete",40,41),l.bc("optionSelected",function(t){return l.xc(e),l.fc(2).selectResult(t)}),l.Gc(12,cn,2,2,"mat-option",42),l.gc(13,"async"),l.Tb(),l.Tb(),l.Ub(14,"a",43),l.Ic(15,"New Channel"),l.Tb(),l.Pb(16,"loading-indicator",44),l.gc(17,"async"),l.Ub(18,"div",45),l.bc("cdkDropListDropped",function(t){return l.xc(e),l.fc(2).reorderChannels(t)}),l.Gc(19,sn,10,4,"div",46),l.gc(20,"async"),l.Tb(),l.Tb()}if(2&e){const e=l.uc(11),t=l.fc(2);l.Cb(6),l.mc("formControl",t.searchControl)("matAutocomplete",e),l.Cb(4),l.mc("autoActiveFirstOption",!0)("displayWith",t.displayFn),l.Cb(2),l.mc("ngForOf",l.hc(13,7,t.results$)),l.Cb(4),l.mc("isVisible",l.hc(17,9,t.loading$)),l.Cb(3),l.mc("ngForOf",l.hc(20,11,t.selectedChannels$))}}function bn(e,t){if(1&e&&(l.Sb(0),l.Ub(1,"div",4),l.Gc(2,tn,3,2,"ng-container",5),l.Gc(3,an,4,1,"ng-container",5),l.Gc(4,on,17,5,"div",6),l.Gc(5,ln,21,13,"div",7),l.Tb(),l.Rb()),2&e){const e=t.ngIf;l.Cb(1),l.mc("ngSwitch",e),l.Cb(1),l.mc("ngSwitchCase","primaryFeatures"),l.Cb(1),l.mc("ngSwitchCase","secondaryFeatures"),l.Cb(1),l.mc("ngSwitchCase","actions"),l.Cb(1),l.mc("ngSwitchCase","channels")}}function un(e,t){if(1&e){const e=l.Vb();l.Ub(0,"div",23),l.Ub(1,"div",15),l.Ub(2,"label",57),l.Ic(3,"Header Title"),l.Tb(),l.Pb(4,"input",58),l.Tb(),l.Ub(5,"div",15),l.Ub(6,"label",59),l.Ic(7,"Header Subtitle"),l.Tb(),l.Pb(8,"textarea",60),l.Tb(),l.Ub(9,"appearance-image-input",61),l.Ic(10,"Header Image "),l.Tb(),l.Ub(11,"color-picker-input",62),l.Ic(12,"Header Overlay Color 1"),l.Tb(),l.Ub(13,"color-picker-input",63),l.Ic(14,"Header Overlay Color 2"),l.Tb(),l.Pb(15,"div",64),l.Ub(16,"ul",65),l.Ub(17,"li",66),l.bc("click",function(){return l.xc(e),l.fc().openSubpanel("actions")}),l.Ub(18,"span",67),l.Ic(19,"Action Buttons"),l.Tb(),l.Pb(20,"mat-icon",68),l.Tb(),l.Ub(21,"li",66),l.bc("click",function(){return l.xc(e),l.fc().openSubpanel("primaryFeatures")}),l.Ub(22,"span",67),l.Ic(23,"Primary Features"),l.Tb(),l.Pb(24,"mat-icon",68),l.Tb(),l.Ub(25,"li",66),l.bc("click",function(){return l.xc(e),l.fc().openSubpanel("secondaryFeatures")}),l.Ub(26,"span",67),l.Ic(27,"Secondary Features"),l.Tb(),l.Pb(28,"mat-icon",68),l.Tb(),l.Ub(29,"li",66),l.bc("click",function(){return l.xc(e),l.fc().openSubpanel("channels")}),l.Ub(30,"span",67),l.Ic(31,"Channels"),l.Tb(),l.Pb(32,"mat-icon",68),l.Tb(),l.Tb(),l.Pb(33,"div",64),l.Ub(34,"div",15),l.Ub(35,"label",69),l.Ic(36,"Footer Title"),l.Tb(),l.Pb(37,"input",70),l.Tb(),l.Ub(38,"div",15),l.Ub(39,"label",71),l.Ic(40,"Footer Subtitle"),l.Tb(),l.Pb(41,"textarea",72),l.Tb(),l.Ub(42,"appearance-image-input",73),l.Ic(43,"Footer Image "),l.Tb(),l.Tb()}if(2&e){const e=l.fc();l.mc("formGroup",e.form),l.Cb(4),l.mc("placeholder",e.defaultValue("headerTitle")),l.Cb(4),l.mc("placeholder",e.defaultValue("headerSubtitle")),l.Cb(1),l.mc("defaultValue",e.defaultValue("headerImage")),l.Cb(28),l.mc("placeholder",e.defaultValue("footerTitle")),l.Cb(4),l.mc("placeholder",e.defaultValue("footerSubtitle")),l.Cb(1),l.mc("defaultValue",e.defaultValue("footerImage"))}}const dn="homepage.appearance",pn={defaultRoute:"/",navigationRoutes:["/","artist","album","track","playlist","genre","user","account","login","register"],menus:{availableRoutes:["admin/upload","upload","library/songs","library/albums","library/artists","library/history"],positions:["sidebar-primary","sidebar-secondary","mobile-bottom","landing-page-navbar","landing-page-footer","custom-page-navbar","admin-navbar"]},sections:[{name:"landing page",component:(()=>{class e{constructor(e,t,n,i){this.fb=e,this.editor=t,this.settings=n,this.channels=i,this.selectedSubpanel$=new x.a(null),this.path$=this.selectedSubpanel$.pipe(Object(s.a)(e=>{const t=["Homepage"];return e&&t.push(e),t})),this.form=this.fb.group({headerTitle:[""],headerSubtitle:[""],headerImage:[""],headerOverlayColor1:[""],headerOverlayColor2:[""],footerTitle:[""],footerSubtitle:[""],footerImage:[""],actions:this.fb.group({inputText:[""],inputButton:[""],cta1:[""],cta2:[""]}),primaryFeatures:this.fb.array([]),secondaryFeatures:this.fb.array([]),channelIds:this.fb.control([])}),this.searchControl=new a.g,this.results$=new x.a([]),this.loading$=new x.a(!1),this.selectedChannels$=new x.a([]),this.displayFn=e=>e?e.name:""}ngOnInit(){this.bindToSearchQueryControl();const e=this.settings.getJson(dn,{});this.loadChannels(e.channelIds),this.defaultValues=this.editor.defaultSettings[dn]?JSON.parse(this.editor.defaultSettings[dn]):{},(e.primaryFeatures||[]).forEach(()=>{this.addFeature("primary")}),(e.secondaryFeatures||[]).forEach(()=>{this.addFeature("secondary")}),this.form.patchValue(e),this.form.valueChanges.subscribe(e=>{this.editor.setConfig(dn,e),this.editor.addChanges({[dn]:e})})}openPreviousPanel(){this.selectedSubpanel$.value?this.openSubpanel(null):this.editor.closeActivePanel()}openSubpanel(e){this.selectedSubpanel$.next(e)}addFeature(e){const t=this.form.get(`${e}Features`),n={title:[""],subtitle:[""],image:[""]};"secondary"===e&&(n.description=[""]),t.push(this.fb.group(n))}removeFeature(e,t){this.form.get(`${e}Features`).removeAt(t)}defaultValue(e){return Kt.pick(e,this.defaultValues)||""}primaryArray(){return this.form.get("primaryFeatures")}secondaryArray(){return this.form.get("secondaryFeatures")}loadChannels(e){e&&e.length&&(this.loading$.next(!0),this.channels.all({channelIds:e}).pipe(Object(P.a)(()=>this.loading$.next(!1))).subscribe(t=>{var n,i;this.selectedChannels$.next((i=e,(n=t.pagination.data)?(n.sort((e,t)=>{const n=t.id;return i.indexOf(e.id)>i.indexOf(n)?1:-1}),n):n))}))}removeChannel(e){const t=this.selectedChannels$.value.filter(t=>t.id!==e.id);this.updateChannels(t)}reorderChannels(e){const t=this.selectedChannels$.value.slice();Object(Fe.f)(t,e.previousIndex,e.currentIndex),this.updateChannels(t)}selectResult(e){const t=e.option.value;this.selectedChannels$.value.find(e=>e.id===t.id)||(this.updateChannels([...this.selectedChannels$.value,t]),this.searchControl.reset())}updateChannels(e){this.selectedChannels$.next(e),this.form.patchValue({channelIds:e.map(e=>e.id)})}bindToSearchQueryControl(){this.searchControl.valueChanges.pipe(Object(Wt.a)(200),Object(Bt.a)(),Object(O.a)(e=>"string"==typeof e),Object(Yt.a)(e=>this.searchForChannel(e)),Object(St.a)(()=>Object(Gt.a)([]))).subscribe(e=>{this.results$.next(e)})}searchForChannel(e){return this.channels.all({query:e}).pipe(Object(s.a)(e=>e.pagination.data.filter(e=>"trackTable"!==e.content_type&&"trackList"!==e.content_type)))}}return e.\u0275fac=function(t){return new(t||e)(l.Ob(a.f),l.Ob(S),l.Ob(M.a),l.Ob(Qt.b))},e.\u0275cmp=l.Ib({type:e,selectors:[["homepage-appearance-panel"]],decls:7,vars:7,consts:[[3,"path","back"],[1,"appearance-panel-content"],[4,"ngIf","ngIfElse"],["mainPanel",""],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","many-inputs",3,"formGroup",4,"ngSwitchCase"],["class","channels-panel many-inputs",4,"ngSwitchCase"],["class","many-inputs feature-group",3,"formGroup",4,"ngFor","ngForOf"],["mat-flat-button","","color","accent","trans","",3,"click",4,"ngIf"],[1,"many-inputs","feature-group",3,"formGroup"],[1,"feature-group-header"],[1,"text"],["mat-icon-button","","color","warn",3,"click"],["svgIcon","close"],[1,"input-container"],["trans","",3,"for"],["type","text","formControlName","title","required","",3,"id","placeholder","highlightInPreview"],["type","text","formControlName","subtitle","required","",3,"id","placeholder","highlightInPreview"],["formControlName","image","diskPrefix","homepage","trans","",3,"defaultValue","highlightInPreview"],["mat-flat-button","","color","accent","trans","",3,"click"],["type","text","formControlName","description","rows","4","required","",3,"id","placeholder","highlightInPreview"],["diskPrefix","homepage","formControlName","image","trans","",3,"defaultValue","highlightInPreview"],[1,"many-inputs",3,"formGroup"],["for","home.actions.inputText","trans",""],["type","text","id","home.actions.inputText","formControlName","inputText","highlightInPreview","new-link-form input","required","",3,"placeholder"],["for","home.actions.inputButton","trans",""],["type","text","id","home.actions.inputButton","formControlName","inputButton","highlightInPreview","new-link-form .mat-flat-button","required","",3,"placeholder"],["for","home.actions.cta1","trans",""],["type","text","id","home.actions.cta1","formControlName","cta1","highlightInPreview",".get-started-button","required","",3,"placeholder"],["for","home.actions.cta2","trans",""],["type","text","id","home.actions.cta2","formControlName","cta2","highlightInPreview",".learn-more-button","required","",3,"placeholder"],[1,"channels-panel","many-inputs"],[1,"slider-list-container"],["for","slider-list","trans",""],[1,"input-wrapper"],["id","slider-list","placeholder","Find channel...","trans-placeholder","",3,"formControl","matAutocomplete"],["inputEl",""],["type","submit","mat-icon-button","",1,"search-button"],["svgIcon","search"],[1,"search-list-autocomplete",3,"autoActiveFirstOption","displayWith","optionSelected"],["sliderAuto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent","routerLink","/admin/channels/new","target","_blank","trans",""],[1,"overlay",3,"isVisible"],["cdkDropList","",1,"lists",3,"cdkDropListDropped"],["class","channel-list-item","cdkDrag","",4,"ngFor","ngForOf"],[3,"value"],["cdkDrag","",1,"channel-list-item"],["mat-icon-button","","cdkDragHandle",""],["svgIcon","drag-handle"],[1,"name"],[1,"actions"],["mat-icon-button","","target","_blank",3,"routerLink"],["svgIcon","edit"],["mat-icon-button","",3,"click"],["svgIcon","delete"],["for","home.header.title","trans",""],["type","text","id","home.header.title","formControlName","headerTitle","highlightInPreview",".header-title","required","",3,"placeholder"],["for","home.header.subtitle","trans",""],["type","text","id","home.header.subtitle","formControlName","headerSubtitle","rows","4","highlightInPreview",".header-description","required","",3,"placeholder"],["highlightInPreview",".hero","diskPrefix","homepage","formControlName","headerImage","trans","",3,"defaultValue"],["formControlName","headerOverlayColor1","trans",""],["formControlName","headerOverlayColor2","trans",""],[1,"separator"],[1,"unstyled-list"],[1,"nav-item",3,"click"],["trans","",1,"text"],["svgIcon","keyboard-arrow-right",1,"actions"],["for","home.footer.title","trans",""],["type","text","id","home.footer.title","formControlName","footerTitle","highlightInPreview",".footer-title","required","",3,"placeholder"],["for","home.footer.subtitle","trans",""],["type","text","id","home.footer.subtitle","formControlName","footerSubtitle","rows","4","highlightInPreview",".footer-description","required","",3,"placeholder"],["highlightInPreview",".bottom-cta","diskPrefix","homepage","formControlName","footerImage","trans","",3,"defaultValue"]],template:function(e,t){if(1&e&&(l.Ub(0,"appearance-panel-meta",0),l.bc("back",function(){return t.openPreviousPanel()}),l.gc(1,"async"),l.Tb(),l.Ub(2,"div",1),l.Gc(3,bn,6,5,"ng-container",2),l.gc(4,"async"),l.Gc(5,un,44,7,"ng-template",null,3,l.Hc),l.Tb()),2&e){const e=l.uc(6);l.mc("path",l.hc(1,3,t.path$)),l.Cb(3),l.mc("ngIf",l.hc(4,5,t.selectedSubpanel$))("ngIfElse",e)}},directives:[R,i.o,i.q,i.r,i.n,a.t,a.k,N.b,G.a,D.a,a.c,a.s,a.i,a.A,oe,ae,Jt.c,a.h,Jt.a,N.a,o.h,ye.a,Fe.c,zt.k,Fe.a,Fe.b,Pe],pipes:[i.b,Xt.a],styles:[".separator[_ngcontent-%COMP%]{height:1px;width:100%;background-color:var(--be-divider-default);margin:20px 0}.feature-group[_ngcontent-%COMP%]{padding-bottom:5px;margin-bottom:15px}.feature-group[_ngcontent-%COMP%], .feature-group-header[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.feature-group-header[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;padding-bottom:10px;margin-bottom:10px}.feature-group-header[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{margin-left:auto}.channels-panel[_ngcontent-%COMP%]{display:block}.channels-panel[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative;margin-bottom:15px}.channels-panel[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .search-button[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px}.channels-panel[_ngcontent-%COMP%]   .lists[_ngcontent-%COMP%]{margin:15px 0}.channel-list-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:10px;border:1px solid var(--be-divider-default);border-radius:4px;background-color:var(--be-background);margin-bottom:10px}.channel-list-item[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-left:auto;color:var(--be-secondary-text)}.channel-list-item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{text-transform:capitalize;margin-right:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1 1 auto}"],changeDetection:0}),e})(),position:1}]};let hn=(()=>{class e{}return e.\u0275mod=l.Mb({type:e}),e.\u0275inj=l.Lb({factory:function(t){return new(t||e)},providers:[{provide:b,useValue:pn,multi:!0}],imports:[[i.c,qt,a.z,Rt,jt.a,o.i,G.b,N.c,Lt.a,Ht,Jt.b,Fe.e]]}),e})()}}]);