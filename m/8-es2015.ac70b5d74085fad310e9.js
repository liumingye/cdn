(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"8cGs":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n("sJvS"),a=n("tU2R"),o=n("PCqb"),s=n("JWVf"),r=n("fXoL");let c=(()=>{class t extends i.a{constructor(){super(...arguments),this.DEFAULT_MAX_SIZE_MB=5}initValidations(){const t=[new a.a({maxSize:Object(o.a)(this.DEFAULT_MAX_SIZE_MB,"MB")},this.i18n),new s.a({types:["image"]},this.i18n)];this.validations.push(...t)}}return t.\u0275fac=function(e){return l(e||t)},t.\u0275prov=r.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const l=r.Wb(c)},DzUk:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var i=n("fXoL"),a=n("Lm4C");let o=(()=>{class t{constructor(t){this.el=t,this.config={},this.filesSelected=new i.n}ngOnInit(){this.el.nativeElement.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation(),Object(a.a)(this.config).then(t=>{t&&t.length&&this.filesSelected.emit(t)})})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(i.l))},t.\u0275dir=i.Jb({type:t,selectors:[["","uploadButton",""]],inputs:{config:["uploadButton","config"]},outputs:{filesSelected:"filesSelected"}}),t})()},W5HX:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var i=function(t){return t.Image="uploads/images",t}({})},gcYM:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var i=n("7o/Q"),a=n("D0XW");n("zx2A");const o={leading:!0,trailing:!1};function s(t,e=a.a,n=o){return i=>i.lift(new r(t,e,n.leading,n.trailing))}class r{constructor(t,e,n,i){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=i}call(t,e){return e.subscribe(new c(t,this.duration,this.scheduler,this.leading,this.trailing))}}class c extends i.a{constructor(t,e,n,i,a){super(t),this.duration=e,this.scheduler=n,this.leading=i,this.trailing=a,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(l,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function l(t){const{subscriber:e}=t;e.clearThrottle()}},pCVY:function(t,e,n){"use strict";n.d(e,"a",function(){return k});var i=n("fXoL"),a=n("3Pt+"),o=n("2Vo4"),s=n("h586"),r=n("QeDF"),c=n("W5HX"),l=n("Lm4C"),b=n("STbY"),u=n("8cGs"),d=n("oVOl"),g=n("LRXf"),p=n("ofXK"),f=n("rG4v"),m=n("gA0O"),h=n("bTqV"),v=n("NFeN"),C=n("DzUk"),I=n("Rd8u");function O(t,e){1&t&&i.Pb(0,"image-or-icon",4),2&t&&i.mc("src",e.ngIf)}function y(t,e){if(1&t&&i.Pb(0,"image-or-icon",4),2&t){const t=i.fc(2);i.mc("src",t.defaultBackground)}}function T(t,e){if(1&t&&i.Gc(0,y,1,1,"image-or-icon",5),2&t){const t=i.fc();i.mc("ngIf",t.defaultBackground)}}function x(t,e){if(1&t){const t=i.Vb();i.Sb(0),i.Pb(1,"span",6),i.Ub(2,"button",7),i.bc("click",function(){return i.xc(t),i.fc().openUploadDialog()}),i.Pb(3,"mat-icon",8),i.Tb(),i.Ub(4,"mat-menu",null,9),i.Ub(6,"button",10),i.bc("filesSelected",function(e){return i.xc(t),i.fc().uploadImage(e)}),i.Ic(7),i.Tb(),i.Ub(8,"button",11),i.bc("click",function(){return i.xc(t),i.fc().deleteUpload()}),i.Ic(9,"Remove"),i.Tb(),i.Tb(),i.Rb()}if(2&t){const t=i.uc(5),e=i.fc();i.Cb(1),i.mc("matMenuTriggerFor",t),i.Cb(5),i.mc("uploadButton",e.uploadInputConfig),i.Cb(1),i.Kc(" ",e.buttonText," ")}}function _(t,e){if(1&t){const t=i.Vb();i.Ub(0,"button",14),i.bc("click",function(){return i.xc(t),i.fc(2).deleteUpload()}),i.Pb(1,"mat-icon",15),i.Tb()}}function U(t,e){if(1&t){const t=i.Vb();i.Sb(0),i.Ub(1,"button",12),i.bc("filesSelected",function(e){return i.xc(t),i.fc().uploadImage(e)}),i.Ic(2),i.Tb(),i.Gc(3,_,2,0,"button",13),i.gc(4,"async"),i.Rb()}if(2&t){const t=i.fc();i.Cb(1),i.mc("uploadButton",t.uploadInputConfig),i.Cb(1),i.Kc(" ",t.buttonText," "),i.Cb(1),i.mc("ngIf",i.hc(4,3,t.src$))}}let k=(()=>{class t{constructor(t,e,n,a){this.uploadQueue=t,this.imageValidator=e,this.uploadsApi=n,this.http=a,this.fileDeleted=new i.n,this.buttonText="Upload image",this.compact=!1,this.uploadInputConfig={multiple:!1,types:[r.a.image]},this.src$=new o.a(null)}writeValue(t){this.src$.next(t)}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}uploadImage(t){this.uploadQueue.start(t,this.uploadConfig||this.defaultUploadConfig()).subscribe(t=>{this.src$.next(t.fileEntry.url),this.propagateChange(t.fileEntry.url)})}deleteUpload(){const t={paths:[this.src$.value],deleteForever:!0};(this.uploadConfig&&this.uploadConfig.uri?this.http.delete(this.uploadConfig.uri,t):this.uploadsApi.delete(t)).subscribe(()=>{this.src$.next(null),this.propagateChange(null),this.fileDeleted.emit()})}defaultUploadConfig(){return{httpParams:{diskPrefix:this.diskPrefix||"common_media"},uri:c.a.Image,validator:this.imageValidator}}openUploadDialog(){this.src$.value?this.menuTrigger.toggleMenu():Object(l.a)(this.uploadInputConfig).then(t=>{this.uploadImage(t)})}}return t.\u0275fac=function(e){return new(e||t)(i.Ob(s.a),i.Ob(u.a),i.Ob(d.a),i.Ob(g.a))},t.\u0275cmp=i.Ib({type:t,selectors:[["upload-image-control"]],viewQuery:function(t,e){if(1&t&&i.Nc(b.d,1),2&t){let t;i.tc(t=i.cc())&&(e.menuTrigger=t.first)}},hostVars:2,hostBindings:function(t,e){2&t&&i.Gb("compact",e.compact)},inputs:{defaultBackground:"defaultBackground",buttonText:"buttonText",uploadConfig:"uploadConfig",diskPrefix:"diskPrefix",compact:"compact"},outputs:{fileDeleted:"fileDeleted"},features:[i.Bb([s.a,{provide:a.q,useExisting:t,multi:!0}])],decls:8,vars:6,consts:[["class","inherit-size",3,"src",4,"ngIf","ngIfElse"],["defaultBg",""],[1,"action-buttons"],[4,"ngIf"],[1,"inherit-size",3,"src"],["class","inherit-size",3,"src",4,"ngIf"],[3,"matMenuTriggerFor"],["type","button","mat-icon-button","",1,"action-button",3,"click"],["svgIcon","edit"],["menu","matMenu"],["type","button","mat-menu-item","",3,"uploadButton","filesSelected"],["type","button","mat-menu-item","","trans","",3,"click"],["type","button","mat-stroked-button","","color","accent","trans","",1,"action-button",3,"uploadButton","filesSelected"],["type","button","class","action-button delete-button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-icon-button","",1,"action-button","delete-button",3,"click"],["svgIcon","delete"]],template:function(t,e){if(1&t&&(i.Gc(0,O,1,1,"image-or-icon",0),i.gc(1,"async"),i.Gc(2,T,1,1,"ng-template",null,1,i.Hc),i.Ub(4,"div",2),i.Gc(5,x,10,3,"ng-container",3),i.Gc(6,U,5,5,"ng-container",3),i.Tb(),i.Pb(7,"upload-progress-bar")),2&t){const t=i.uc(3);i.mc("ngIf",i.hc(1,4,e.src$))("ngIfElse",t),i.Cb(5),i.mc("ngIf",e.compact),i.Cb(1),i.mc("ngIf",!e.compact)}},directives:[p.o,f.a,m.a,b.d,h.b,v.a,b.a,b.b,C.a,I.a],pipes:[p.b],styles:["[_nghost-%COMP%]{display:block;width:220px;height:220px;flex-shrink:0;border-radius:4px;overflow:hidden;background:linear-gradient(135deg,#70929c,#846170);position:relative}.inherit-size[_nghost-%COMP%], .inherit-size   [_nghost-%COMP%]{width:100%;height:100%}.compact[_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%], .compact   [_nghost-%COMP%]   .action-buttons[_ngcontent-%COMP%]{bottom:0;top:0}.action-buttons[_ngcontent-%COMP%]{position:absolute;bottom:25px;left:0;right:0;margin:auto;text-align:center;height:34px}.action-button[_ngcontent-%COMP%]{color:rgba(0,0,0,.87);border-color:rgba(0,0,0,.1);background:hsla(0,0%,100%,.8)}.mat-icon-button[_ngcontent-%COMP%]{border-radius:4px;line-height:34px;height:34px;width:34px}.delete-button[_ngcontent-%COMP%]{margin-left:5px}upload-progress-bar[_ngcontent-%COMP%]{width:100%;position:absolute;left:0;bottom:0}"]}),t})()},q0P8:function(t,e,n){"use strict";n.r(e),n.d(e,"UserProfileModule",function(){return oe});var i=n("ofXK"),a=n("mhcW"),o=n("tyNb"),s=n("0IaG"),r=n("fo0W"),c=n("rpSV"),l=n("gDwl"),b=n("Fmut"),u=n("wN08"),d=n("2Vo4"),g=n("pLZG"),p=n("3E0/"),f=n("nYR2"),m=n("fXoL"),h=n("3Pt+"),v=n("LRXf"),C=n("twBr");let I=(()=>{class t{constructor(t,e){this.http=t,this.currentUser=e}get(t){return this.http.get(`user-profile/${t}`)}update(t,e){return this.http.put(`user-profile/${t}`,e)}loadMore(t,e,n){return this.http.get(`user-profile/${t}/load-more/${e}`,n)}follow(t,e){this.http.post(`users/${t.id}/follow`).subscribe(()=>{this.currentUser.getModel().followed_users.push(t),e.markForCheck()})}unfollow(t,e){this.http.post(`users/${t.id}/unfollow`).subscribe(()=>{const n=this.currentUser.getModel().followed_users,i=n.findIndex(e=>e.id===t.id);n.splice(i,1),e.markForCheck()})}currentUserIsFollowing(t){return!!this.currentUser.getModel().followed_users&&!!this.currentUser.getModel().followed_users.find(e=>e.id===t.id)}}return t.\u0275fac=function(e){return new(e||t)(m.Yb(v.a),m.Yb(C.a))},t.\u0275prov=m.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var O=n("IuoX"),y=n("i2dy"),T=n("xrAa"),x=n("0Ej5"),_=n("Rd8u"),U=n("bTqV"),k=n("NFeN"),P=n("pCVY");function w(t,e){if(1&t&&(m.Ub(0,"option",34),m.Ic(1),m.Tb()),2&t){const t=e.$implicit;m.mc("value",t.name),m.Cb(1),m.Jc(t.name)}}function M(t,e){if(1&t){const t=m.Vb();m.Ub(0,"li",35),m.Ub(1,"div",36),m.Ub(2,"div",11),m.Ub(3,"label",37),m.Ic(4,"\u94fe\u63a5"),m.Tb(),m.Pb(5,"input",38),m.Tb(),m.Ub(6,"div",11),m.Ub(7,"label",39),m.Ic(8,"\u7b80\u79f0"),m.Tb(),m.Pb(9,"input",40),m.Tb(),m.Ub(10,"button",41),m.bc("click",function(){m.xc(t);const n=e.index;return m.fc().deleteLink(n)}),m.Pb(11,"mat-icon",42),m.Tb(),m.Tb(),m.Tb()}if(2&t){const t=e.index;m.mc("formGroupName",t),m.Cb(3),m.mc("for","url-"+t),m.Cb(2),m.mc("id","url-"+t)}}let $=(()=>{class t{constructor(t,e,n,i,a,o,s,r){this.fb=t,this.dialogRef=e,this.profiles=n,this.avatarValidator=i,this.toast=a,this.imageValidator=o,this.valueLists=s,this.data=r,this.loading$=new d.a(!1),this.form=this.fb.group({user:this.fb.group({avatar:[""],display_name:[""],username:[""],first_name:[""],last_name:[""]}),profile:this.fb.group({city:[""],country:[""],header_image:[""],description:[""]}),links:this.fb.array([])}),this.countries$=new d.a([]),this.form.patchValue({user:this.data.user,profile:this.data.user.profile}),this.data.user.links.forEach(t=>{this.addNewLink(t)}),this.valueLists.get(["countries"]).subscribe(t=>{this.countries$.next(t.countries)}),this.form.get("profile.header_image").valueChanges.pipe(Object(p.a)(0)).subscribe(()=>{this.confirm(!1)})}confirm(t=!0){this.loading$.next(!0),this.form.value.user.username=this.form.value.user.display_name,this.profiles.update(this.data.user.id,this.form.value).pipe(Object(f.a)(()=>this.loading$.next(!1))).subscribe(e=>{t&&(this.toast.open("Profile updated."),this.close(e.user))})}close(t){this.dialogRef.close(t)}linkArray(){return this.form.get("links")}addNewLink(t={}){this.linkArray().push(this.fb.group({url:[t.url||""],title:[t.title||""]}))}deleteLink(t){this.linkArray().removeAt(t)}avatarUploadConfig(){return{uri:`users/${this.data.user.id}/avatar`,validator:this.avatarValidator}}headerImageUploadConfig(){return{uri:"uploads",httpParams:{diskPrefix:"user_header_media",disk:"public"},validator:this.imageValidator}}}return t.\u0275fac=function(e){return new(e||t)(m.Ob(h.f),m.Ob(s.g),m.Ob(I),m.Ob(O.a),m.Ob(y.b),m.Ob(T.a),m.Ob(x.a),m.Ob(s.a,8))},t.\u0275cmp=m.Ib({type:t,selectors:[["edit-user-profile-modal"]],decls:57,vars:10,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",1,"modal-title"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"formGroup","ngSubmit"],["formGroupName","profile"],["buttonText","\u4e0a\u4f20\u5934\u90e8\u56fe\u7247","formControlName","header_image",1,"header-image-control",3,"uploadConfig","fileDeleted"],[1,"flex-container"],["formGroupName","user"],["buttonText","\u4e0a\u4f20\u5934\u50cf","formControlName","avatar",3,"uploadConfig"],[1,"many-inputs","right-column"],[1,"input-container"],["for","profile-username","trans",""],["type","text","id","profile-username","formControlName","display_name","required",""],[1,"inline-inputs-container","many-inputs"],["for","profile-first_name","trans",""],["type","text","id","profile-first_name","formControlName","first_name"],["for","profile-last_name","trans",""],["type","text","id","profile-last_name","formControlName","last_name"],["for","profile-city","trans",""],["type","text","id","profile-city","formControlName","city"],["for","profile-country","trans",""],["id","profile-country","formControlName","country"],[3,"value",4,"ngFor","ngForOf"],["for","profile-description","trans",""],["type","text","id","profile-description","formControlName","description","rows","6","maxlength","250"],[1,"links-container"],[1,"links-header"],["trans","",1,"text"],["type","button","mat-flat-button","","color","accent","trans","",1,"add-link-button",3,"click"],["formArrayName","links",1,"unstyled-list"],[3,"formGroupName",4,"ngFor","ngForOf"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled"],[3,"value"],[3,"formGroupName"],[1,"inline-inputs-container","inline-link-container","many-inputs"],["trans","",3,"for"],["type","url","formControlName","url","required","",3,"id"],["for","title","trans",""],["type","text","id","title","formControlName","title","required",""],["type","button","mat-icon-button","",1,"remove-link-button",3,"click"],["svgIcon","delete"]],template:function(t,e){1&t&&(m.Ub(0,"div",0),m.Ub(1,"h2",1),m.Ic(2,"\u7f16\u8f91\u4f60\u7684\u8d44\u6599"),m.Tb(),m.Ub(3,"button",2),m.bc("click",function(){return e.close()}),m.Pb(4,"mat-icon",3),m.Tb(),m.Tb(),m.Ub(5,"form",4),m.bc("ngSubmit",function(){return e.confirm()}),m.Ub(6,"mat-dialog-content"),m.Sb(7,5),m.Ub(8,"upload-image-control",6),m.bc("fileDeleted",function(){return e.confirm(!1)}),m.Tb(),m.Rb(),m.Ub(9,"div",7),m.Sb(10,8),m.Pb(11,"upload-image-control",9),m.Rb(),m.Ub(12,"div",10),m.Sb(13,8),m.Ub(14,"div",11),m.Ub(15,"label",12),m.Ic(16,"\u7528\u6237\u540d"),m.Tb(),m.Pb(17,"input",13),m.Tb(),m.Ub(18,"div",14),m.Ub(19,"div",11),m.Ub(20,"label",15),m.Ic(21,"\u540d\u5b57"),m.Tb(),m.Pb(22,"input",16),m.Tb(),m.Ub(23,"div",11),m.Ub(24,"label",17),m.Ic(25,"\u59d3\u6c0f"),m.Tb(),m.Pb(26,"input",18),m.Tb(),m.Tb(),m.Rb(),m.Sb(27,5),m.Ub(28,"div",14),m.Ub(29,"div",11),m.Ub(30,"label",19),m.Ic(31,"\u57ce\u5e02"),m.Tb(),m.Pb(32,"input",20),m.Tb(),m.Ub(33,"div",11),m.Ub(34,"label",21),m.Ic(35,"\u56fd\u5bb6"),m.Tb(),m.Ub(36,"select",22),m.Gc(37,w,2,2,"option",23),m.gc(38,"async"),m.Tb(),m.Tb(),m.Tb(),m.Ub(39,"div",11),m.Ub(40,"label",24),m.Ic(41,"\u4e2a\u6027\u7b7e\u540d"),m.Tb(),m.Pb(42,"textarea",25),m.Tb(),m.Rb(),m.Tb(),m.Tb(),m.Ub(43,"div",26),m.Ub(44,"div",27),m.Ub(45,"div",28),m.Ic(46,"\u4f60\u7684\u94fe\u63a5"),m.Tb(),m.Ub(47,"button",29),m.bc("click",function(){return e.addNewLink()}),m.Ic(48," \u6dfb\u52a0\u94fe\u63a5 "),m.Tb(),m.Tb(),m.Ub(49,"ul",30),m.Gc(50,M,12,3,"li",31),m.Tb(),m.Tb(),m.Tb(),m.Ub(51,"mat-dialog-actions"),m.Ub(52,"button",32),m.bc("click",function(){return e.close()}),m.Ic(53,"\u5173\u95ed"),m.Tb(),m.Ub(54,"button",33),m.gc(55,"async"),m.Ic(56," \u4fdd\u5b58 "),m.Tb(),m.Tb(),m.Tb()),2&t&&(m.Cb(5),m.mc("formGroup",e.form),m.Cb(3),m.mc("uploadConfig",e.headerImageUploadConfig()),m.Cb(3),m.mc("uploadConfig",e.avatarUploadConfig()),m.Cb(26),m.mc("ngForOf",m.hc(38,6,e.countries$)),m.Cb(13),m.mc("ngForOf",e.linkArray().controls),m.Cb(4),m.mc("disabled",m.hc(55,8,e.loading$)))},directives:[s.h,_.a,U.b,k.a,h.t,h.k,s.e,h.l,P.a,h.s,h.i,h.c,h.A,h.B,i.n,h.n,h.e,s.c,h.w,h.D],pipes:[i.b],styles:["[_nghost-%COMP%]{display:block;width:800px;max-width:100%}.header-image-control[_ngcontent-%COMP%]{width:100%;height:200px;margin-bottom:25px}.flex-container[_ngcontent-%COMP%]{display:flex}.right-column[_ngcontent-%COMP%]{flex:1 1 auto}upload-image-control[_ngcontent-%COMP%]{flex-shrink:0;margin-right:25px}.links-header[_ngcontent-%COMP%]{display:flex;align-items:center;border-bottom:1px solid var(--be-divider-default);margin:10px 0;padding-bottom:10px}.add-link-button[_ngcontent-%COMP%]{margin-left:auto}.inline-link-container[_ngcontent-%COMP%]{align-items:center}.remove-link-button[_ngcontent-%COMP%]{color:#f44336}"],changeDetection:0}),t})();var G=n("h586"),V=n("XFMS"),F=n("kmQS"),S=n("oJCZ"),N=n("mWN8"),D=n("QGXG"),L=n("jhN1"),z=n("8HKz"),j=n("INnT"),A=n("3Nhn");let R=(()=>{class t extends A.a{constructor(t,e,n){super(),this.userProfile=t,this.el=e,this.zone=n,this.pagination$=new d.a(null),this.loading$=new d.a(!1)}ngOnChanges(t){!this.visible||this.pagination$.value||this.isLoading()||this.loadMoreItems()}ngAfterViewInit(){const t=this.el.nativeElement.closest(".page-wrapper");this.el=new m.l(t),super.ngOnInit()}canLoadMore(){return this.visible&&(!this.pagination$.value||this.pagination$.value.last_page>this.pagination$.value.current_page)}isLoading(){return this.loading$.value}loadMoreItems(){this.loading$.next(!0),this.userProfile.loadMore(this.user.id,this.contentType,{page:this.currentPage()+1}).pipe(Object(f.a)(()=>this.loading$.next(!1))).subscribe(t=>{this.pagination$.next(Object.assign(Object.assign({},t.pagination),{data:[...this.currentData(),...t.pagination.data]}))})}currentPage(){return this.pagination$.value?this.pagination$.value.current_page:0}currentData(){return this.pagination$.value?this.pagination$.value.data:[]}}return t.\u0275fac=function(e){return new(e||t)(m.Ob(I),m.Ob(m.l),m.Ob(m.A))},t.\u0275dir=m.Jb({type:t,hostVars:2,hostBindings:function(t,e){2&t&&m.Gb("visible",e.visible)},inputs:{user:"user",visible:"visible"},features:[m.zb,m.Ab]}),t})();var B=n("wQ4x"),E=n("FBzJ"),X=n("1nmi"),J=n("vsEl"),Q=n("CH4Q");function q(t,e){if(1&t&&m.Pb(0,"playlist-item",4),2&t){const t=m.fc().$implicit;m.mc("playlist",t)}}function Y(t,e){if(1&t&&(m.Sb(0),m.Gc(1,q,1,1,"playlist-item",3),m.Rb()),2&t){const t=e.$implicit;m.Cb(1),m.mc("ngIf",t.public)}}function K(t,e){if(1&t&&(m.Ub(0,"media-grid"),m.Gc(1,Y,2,1,"ng-container",2),m.Tb()),2&t){const t=m.fc().ngIf,e=m.fc();m.mc("@fadeIn",e.visible),m.Cb(1),m.mc("ngForOf",t.data)}}function W(t,e){1&t&&(m.Ub(0,"no-results-message"),m.Ub(1,"span",5),m.Ic(2,"\u6b64\u7528\u6237\u6ca1\u6709\u521b\u5efa\u4efb\u4f55\u6b4c\u5355..."),m.Tb(),m.Tb())}function H(t,e){if(1&t&&(m.Sb(0),m.Gc(1,K,2,2,"media-grid",0),m.Gc(2,W,3,0,"no-results-message",0),m.Rb()),2&t){const t=e.ngIf;m.Cb(1),m.mc("ngIf",t.data.length),m.Cb(1),m.mc("ngIf",!t.data.length)}}let Z=(()=>{class t extends R{constructor(){super(...arguments),this.contentType="playlists"}}return t.\u0275fac=function(e){return tt(e||t)},t.\u0275cmp=m.Ib({type:t,selectors:[["user-playlists-tab"]],features:[m.zb],decls:4,vars:6,consts:[[4,"ngIf"],[1,"inline",3,"isVisible"],[4,"ngFor","ngForOf"],[3,"playlist",4,"ngIf"],[3,"playlist"],["primary-text","","trans",""]],template:function(t,e){1&t&&(m.Gc(0,H,3,2,"ng-container",0),m.gc(1,"async"),m.Pb(2,"loading-indicator",1),m.gc(3,"async")),2&t&&(m.mc("ngIf",m.hc(1,2,e.pagination$)),m.Cb(2),m.mc("isVisible",m.hc(3,4,e.loading$)))},directives:[i.o,E.a,X.a,i.n,J.a,Q.a,_.a],pipes:[i.b],encapsulation:2,data:{animation:[B.a]},changeDetection:0}),t})();const tt=m.Wb(Z);var et=n("IAz0"),nt=n("Ulgq");function it(t,e){1&t&&(m.Ub(0,"no-results-message"),m.Ub(1,"span",3),m.Ic(2,"\u6682\u65e0\u6570\u636e"),m.Tb(),m.Ub(3,"span",4),m.kc(4),m.Tb(),m.Tb())}function at(t,e){if(1&t&&m.Pb(0,"media-list-item",5),2&t){const t=e.$implicit,n=m.fc().ngIf;m.mc("media",t)("tracks",n.data)}}function ot(t,e){if(1&t&&(m.Sb(0),m.Gc(1,it,5,0,"no-results-message",0),m.Ub(2,"div"),m.Gc(3,at,1,2,"media-list-item",2),m.Tb(),m.Rb()),2&t){const t=e.ngIf,n=m.fc();m.Cb(1),m.mc("ngIf",!t.data.length),m.Cb(1),m.mc("@fadeIn",n.visible),m.Cb(1),m.mc("ngForOf",t.data)}}const st=["*"];let rt=(()=>{class t extends R{constructor(t,e,n,i){super(t,e,n),this.userProfile=t,this.el=e,this.zone=n,this.tracks=i,this.trackDeleteSub=this.tracks.tracksDeleted$.pipe(Object(g.a)(()=>!!this.pagination$.value)).subscribe(t=>{const e=this.pagination$.value.data.filter(e=>!t.includes(e.id));this.pagination$.next(Object.assign(Object.assign({},this.pagination$.value),{data:e}))})}ngOnDestroy(){this.trackDeleteSub.unsubscribe(),super.ngOnDestroy()}}return t.\u0275fac=function(e){return new(e||t)(m.Ob(I),m.Ob(m.l),m.Ob(m.A),m.Ob(et.a))},t.\u0275cmp=m.Ib({type:t,selectors:[["uploaded-tracks-tab"]],inputs:{contentType:"contentType"},features:[m.zb],ngContentSelectors:st,decls:4,vars:6,consts:[[4,"ngIf"],[1,"inline",3,"isVisible"],[3,"media","tracks",4,"ngFor","ngForOf"],["primary-text","","trans",""],["secondary-text",""],[3,"media","tracks"]],template:function(t,e){1&t&&(m.lc(),m.Gc(0,ot,4,3,"ng-container",0),m.gc(1,"async"),m.Pb(2,"loading-indicator",1),m.gc(3,"async")),2&t&&(m.mc("ngIf",m.hc(1,2,e.pagination$)),m.Cb(2),m.mc("isVisible",m.hc(3,4,e.loading$)))},directives:[i.o,E.a,i.n,Q.a,_.a,nt.a],pipes:[i.b],styles:["media-list-item[_ngcontent-%COMP%]{margin-bottom:35px}.no-results-message[_ngcontent-%COMP%]{margin:30px 0}"],data:{animation:[B.a]}}),t})();function ct(t,e){if(1&t&&(m.Ub(0,"div",11),m.Ic(1),m.Ub(2,"span",12),m.Ic(3,"\u4e2a\u7c89\u4e1d"),m.Tb(),m.Tb()),2&t){const t=m.fc().$implicit;m.Cb(1),m.Kc("",t.followers_count," ")}}function lt(t,e){if(1&t){const t=m.Vb();m.Ub(0,"button",13),m.bc("click",function(){m.xc(t);const e=m.fc().$implicit,n=m.fc(3);return n.profile.follow(e,n.cd)}),m.Ic(1," \u5173\u6ce8 "),m.Tb()}}function bt(t,e){if(1&t){const t=m.Vb();m.Ub(0,"button",13),m.bc("click",function(){m.xc(t);const e=m.fc().$implicit,n=m.fc(3);return n.profile.unfollow(e,n.cd)}),m.Ic(1," \u53d6\u6d88\u5173\u6ce8 "),m.Tb()}}function ut(t,e){if(1&t&&(m.Ub(0,"div",5),m.Pb(1,"media-image",6),m.Ub(2,"div",7),m.Ub(3,"a",8),m.Ic(4),m.Tb(),m.Gc(5,ct,4,1,"div",9),m.Tb(),m.Gc(6,lt,2,0,"button",10),m.Gc(7,bt,2,0,"button",10),m.Tb()),2&t){const t=e.$implicit,n=m.fc(3);m.Cb(1),m.mc("media",t),m.Cb(2),m.mc("routerLink",n.urls.user(t)),m.Cb(1),m.Jc(t.display_name),m.Cb(1),m.mc("ngIf",null!=t.followers_count),m.Cb(1),m.mc("ngIf",!n.profile.currentUserIsFollowing(t)&&!n.isCurrentUser(t)),m.Cb(1),m.mc("ngIf",n.profile.currentUserIsFollowing(t)&&!n.isCurrentUser(t))}}function dt(t,e){if(1&t&&(m.Ub(0,"div",3),m.Gc(1,ut,8,6,"div",4),m.Tb()),2&t){const t=m.fc().ngIf,e=m.fc();m.mc("@fadeIn",e.visible),m.Cb(1),m.mc("ngForOf",t.data)}}function gt(t,e){1&t&&(m.Ub(0,"no-results-message"),m.Ub(1,"span",14),m.kc(2),m.Tb(),m.Tb())}function pt(t,e){if(1&t&&(m.Sb(0),m.Gc(1,dt,2,2,"div",2),m.Gc(2,gt,3,0,"no-results-message",0),m.Rb()),2&t){const t=e.ngIf;m.Cb(1),m.mc("ngIf",t.data.length),m.Cb(1),m.mc("ngIf",!t.data.length)}}const ft=["*"];let mt=(()=>{class t extends R{constructor(t,e,n,i,a,o){super(t,e,o),this.profile=t,this.el=e,this.urls=n,this.currentUser=i,this.cd=a,this.zone=o}isCurrentUser(t){return t.id===this.currentUser.get("id")}}return t.\u0275fac=function(e){return new(e||t)(m.Ob(I),m.Ob(m.l),m.Ob(S.a),m.Ob(C.a),m.Ob(m.h),m.Ob(m.A))},t.\u0275cmp=m.Ib({type:t,selectors:[["user-follows-tab"]],inputs:{contentType:"contentType"},features:[m.zb],ngContentSelectors:ft,decls:4,vars:6,consts:[[4,"ngIf"],[1,"inline",3,"isVisible"],["class","followed-users",4,"ngIf"],[1,"followed-users"],["class","follower-row",4,"ngFor","ngForOf"],[1,"follower-row"],[3,"media"],[1,"meta"],[1,"name","hover-underline",3,"routerLink"],["class","followers",4,"ngIf"],["mat-stroked-button","","class","follow-button","trans","",3,"click",4,"ngIf"],[1,"followers"],["trans",""],["mat-stroked-button","","trans","",1,"follow-button",3,"click"],["primary-text",""]],template:function(t,e){1&t&&(m.lc(),m.Gc(0,pt,3,2,"ng-container",0),m.gc(1,"async"),m.Pb(2,"loading-indicator",1),m.gc(3,"async")),2&t&&(m.mc("ngIf",m.hc(1,2,e.pagination$)),m.Cb(2),m.mc("isVisible",m.hc(3,4,e.loading$)))},directives:[i.o,E.a,i.n,z.a,o.h,_.a,U.b,Q.a],pipes:[i.b],styles:[".follower-row[_ngcontent-%COMP%]{display:flex;align-items:center;padding:15px 0;border-bottom:1px solid var(--be-divider-default)}media-image[_ngcontent-%COMP%]{width:65px;height:65px;margin-right:15px}.meta[_ngcontent-%COMP%]{font-size:1.5rem}.meta[_ngcontent-%COMP%]   .followers[_ngcontent-%COMP%]{color:var(--be-hint-text);margin-top:5px}.meta[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{display:block;color:inherit}.follow-button[_ngcontent-%COMP%]{margin-left:auto;background-color:var(--be-raised-button);border-radius:15px;min-width:90px}"],data:{animation:[B.a]},changeDetection:0}),t})();var ht=n("Qu3c"),vt=n("/M5e");const Ct=function(t){return{displayName:t}};function It(t,e){if(1&t&&(m.Ub(0,"no-results-message"),m.Ub(1,"span",3),m.Ic(2,"No albums yet"),m.Tb(),m.Ub(3,"span",4),m.Ic(4,"Follow :displayName for updates on albums they share in the future."),m.Tb(),m.Tb()),2&t){const t=m.fc(2);m.Cb(3),m.mc("transValues",m.qc(1,Ct,t.user.display_name))}}function Ot(t,e){1&t&&m.Pb(0,"media-list-item",5),2&t&&m.mc("media",e.$implicit)}function yt(t,e){if(1&t&&(m.Sb(0),m.Gc(1,It,5,3,"no-results-message",0),m.Ub(2,"div"),m.Gc(3,Ot,1,1,"media-list-item",2),m.Tb(),m.Rb()),2&t){const t=e.ngIf,n=m.fc();m.Cb(1),m.mc("ngIf",!t.data.length),m.Cb(1),m.mc("@fadeIn",n.visible),m.Cb(1),m.mc("ngForOf",t.data)}}let Tt=(()=>{class t extends R{constructor(t,e,n,i){super(t,e,n),this.userProfile=t,this.el=e,this.zone=n,this.albums=i,this.contentType="albums",this.albumDeleteSub=this.albums.albumsDeleted$.pipe(Object(g.a)(()=>!!this.pagination$.value)).subscribe(t=>{const e=this.pagination$.value.data.filter(e=>!t.includes(e.id));this.pagination$.next(Object.assign(Object.assign({},this.pagination$.value),{data:e}))})}ngOnDestroy(){this.albumDeleteSub.unsubscribe(),super.ngOnDestroy()}}return t.\u0275fac=function(e){return new(e||t)(m.Ob(I),m.Ob(m.l),m.Ob(m.A),m.Ob(vt.a))},t.\u0275cmp=m.Ib({type:t,selectors:[["user-albums-tab"]],features:[m.zb],decls:4,vars:6,consts:[[4,"ngIf"],[1,"inline",3,"isVisible"],[3,"media",4,"ngFor","ngForOf"],["primary-text","","trans",""],["secondary-text","","trans","",3,"transValues"],[3,"media"]],template:function(t,e){1&t&&(m.Gc(0,yt,4,3,"ng-container",0),m.gc(1,"async"),m.Pb(2,"loading-indicator",1),m.gc(3,"async")),2&t&&(m.mc("ngIf",m.hc(1,2,e.pagination$)),m.Cb(2),m.mc("isVisible",m.hc(3,4,e.loading$)))},directives:[i.o,E.a,i.n,Q.a,_.a,nt.a],pipes:[i.b],styles:["media-list-item[_ngcontent-%COMP%]{margin-bottom:35px}"],data:{animation:[B.a]},changeDetection:0}),t})();const xt=function(t){return{displayName:t}};function _t(t,e){if(1&t&&(m.Ub(0,"no-results-message"),m.Ub(1,"span",3),m.Ic(2,"No reposts yet"),m.Tb(),m.Ub(3,"span",4),m.Ic(4,"Follow :displayName for updates on reposts they share in the future."),m.Tb(),m.Tb()),2&t){const t=m.fc(2);m.Cb(3),m.mc("transValues",m.qc(1,xt,t.user.display_name))}}function Ut(t,e){if(1&t&&m.Pb(0,"media-list-item",5),2&t){const t=e.$implicit,n=m.fc(2);m.mc("media",t.repostable)("reposter",n.user)}}function kt(t,e){if(1&t&&(m.Sb(0),m.Gc(1,_t,5,3,"no-results-message",0),m.Ub(2,"div"),m.Gc(3,Ut,1,2,"media-list-item",2),m.Tb(),m.Rb()),2&t){const t=e.ngIf,n=m.fc();m.Cb(1),m.mc("ngIf",!t.data.length),m.Cb(1),m.mc("@fadeIn",n.visible),m.Cb(1),m.mc("ngForOf",t.data)}}let Pt=(()=>{class t extends R{constructor(){super(...arguments),this.contentType="reposts"}}return t.\u0275fac=function(e){return wt(e||t)},t.\u0275cmp=m.Ib({type:t,selectors:[["user-reposts-tab"]],features:[m.zb],decls:4,vars:6,consts:[[4,"ngIf"],[1,"inline",3,"isVisible"],[3,"media","reposter",4,"ngFor","ngForOf"],["primary-text","","trans",""],["secondary-text","","trans","",3,"transValues"],[3,"media","reposter"]],template:function(t,e){1&t&&(m.Gc(0,kt,4,3,"ng-container",0),m.gc(1,"async"),m.Pb(2,"loading-indicator",1),m.gc(3,"async")),2&t&&(m.mc("ngIf",m.hc(1,2,e.pagination$)),m.Cb(2),m.mc("isVisible",m.hc(3,4,e.loading$)))},directives:[i.o,E.a,i.n,Q.a,_.a,nt.a],pipes:[i.b],styles:["media-list-item[_ngcontent-%COMP%]{margin-bottom:35px}.no-results-message[_ngcontent-%COMP%]{margin:30px 0}"],data:{animation:[B.a]},changeDetection:0}),t})();const wt=m.Wb(Pt);var Mt=n("zW5C");function $t(t,e){if(1&t&&(m.Ub(0,"span"),m.Ic(1),m.Tb()),2&t){const t=m.fc().ngIf;m.Cb(1),m.Lc(" (",t.first_name?t.first_name+" ":"","",t.last_name?t.last_name:"",") ")}}function Gt(t,e){1&t&&(m.Ub(0,"button",33),m.gc(1,"trans"),m.Pb(2,"mat-icon",34),m.Tb()),2&t&&m.mc("matTooltip",m.hc(1,1,"Pro\u7528\u6237"))}function Vt(t,e){if(1&t){const t=m.Vb();m.Ub(0,"button",37),m.bc("click",function(){m.xc(t);const e=m.fc(2).ngIf,n=m.fc();return n.profile.follow(e,n.cd)}),m.Ic(1," \u5173\u6ce8 "),m.Tb()}}function Ft(t,e){if(1&t){const t=m.Vb();m.Ub(0,"button",37),m.bc("click",function(){m.xc(t);const e=m.fc(2).ngIf,n=m.fc();return n.profile.unfollow(e,n.cd)}),m.Ic(1," \u53d6\u6d88\u5173\u6ce8 "),m.Tb()}}function St(t,e){if(1&t&&(m.Ub(0,"div",35),m.Gc(1,Vt,2,0,"button",36),m.Gc(2,Ft,2,0,"button",36),m.Tb()),2&t){const t=m.fc().ngIf,e=m.fc();m.Cb(1),m.mc("ngIf",!e.profile.currentUserIsFollowing(t)),m.Cb(1),m.mc("ngIf",e.profile.currentUserIsFollowing(t))}}function Nt(t,e){if(1&t&&(m.Ub(0,"div",38),m.Ub(1,"p",39),m.Ic(2),m.Tb(),m.Tb()),2&t){const t=m.fc().ngIf;m.Cb(2),m.Jc(t.profile.description)}}function Dt(t,e){if(1&t&&(m.Ub(0,"span",43),m.Ic(1),m.Tb()),2&t){const t=m.fc(2).ngIf;m.Cb(1),m.Jc(t.profile.city)}}function Lt(t,e){if(1&t&&(m.Ub(0,"span",44),m.Ic(1),m.Tb()),2&t){const t=m.fc(2).ngIf;m.Cb(1),m.Kc(", ",t.profile.country,"")}}function zt(t,e){if(1&t&&(m.Ub(0,"div",40),m.Ub(1,"span",38),m.Gc(2,Dt,2,1,"span",41),m.Gc(3,Lt,2,1,"span",42),m.Tb(),m.Tb()),2&t){const t=m.fc().ngIf;m.Cb(2),m.mc("ngIf",t.profile.city),m.Cb(1),m.mc("ngIf",t.profile.country)}}function jt(t,e){if(1&t){const t=m.Vb();m.Ub(0,"button",45),m.bc("click",function(){return m.xc(t),m.fc(2).openEditProfileModal()}),m.Pb(1,"mat-icon",46),m.Ub(2,"span",29),m.Ic(3,"\u7f16\u8f91"),m.Tb(),m.Tb()}}function At(t,e){if(1&t&&(m.Ub(0,"a",47),m.Ic(1),m.Tb()),2&t){const t=e.$implicit,n=m.fc().ngIf,i=m.fc();m.Gb("active",i.activeTabIs(t)),m.mc("routerLink",i.urls.user(n,t)),m.Cb(1),m.Jc(t)}}function Rt(t,e){if(1&t&&(m.Ub(0,"a",48),m.Pb(1,"img",49),m.Tb()),2&t){const t=e.$implicit,n=m.fc(2);m.mc("href",t.url,m.Ac)("matTooltip",t.title),m.Cb(1),m.mc("src",n.favicon(t.url),m.Ac)("alt",t.title)}}const Bt=function(t){return{displayName:t}};function Et(t,e){if(1&t&&(m.Sb(0),m.Ub(1,"uploaded-tracks-tab",50),m.Ub(2,"span",51),m.Ic(3,"Follow :displayName for updates on tracks they share in the future."),m.Tb(),m.Tb(),m.Pb(4,"user-albums-tab",27),m.Rb()),2&t){const t=m.fc().ngIf,e=m.fc();m.Cb(1),m.mc("user",t)("visible",e.activeTabIs("\u5355\u66f2")),m.Cb(1),m.mc("transValues",m.qc(5,Bt,t.display_name)),m.Cb(2),m.mc("user",t)("visible",e.activeTabIs("\u4e13\u8f91"))}}function Xt(t,e){if(1&t&&m.Pb(0,"user-reposts-tab",27),2&t){const t=m.fc().ngIf,e=m.fc();m.mc("user",t)("visible",e.activeTabIs("\u8f6c\u53d1"))}}function Jt(t,e){if(1&t&&(m.Sb(0),m.Ub(1,"div",1),m.Pb(2,"div",2),m.Ub(3,"div",3),m.Pb(4,"media-image",4),m.Ub(5,"div",5),m.Ub(6,"div",6),m.Ub(7,"h1",7),m.Ic(8),m.Gc(9,$t,2,2,"span",0),m.Gc(10,Gt,3,3,"button",8),m.Tb(),m.Ub(11,"div",9),m.Ub(12,"div",10),m.Ub(13,"div",11),m.Ic(14),m.Tb(),m.Ub(15,"div",12),m.Ic(16,"\u7c89\u4e1d"),m.Tb(),m.Tb(),m.Ub(17,"div",13),m.Ub(18,"div",11),m.Ic(19),m.Tb(),m.Ub(20,"div",12),m.Ic(21,"\u5173\u6ce8"),m.Tb(),m.Tb(),m.Tb(),m.Gc(22,St,3,2,"div",14),m.Gc(23,Nt,3,1,"div",15),m.Gc(24,zt,4,2,"div",16),m.Tb(),m.Ub(25,"div",17),m.Gc(26,jt,4,0,"button",18),m.Tb(),m.Tb(),m.Tb(),m.Ub(27,"div",19),m.Ub(28,"div",20),m.Gc(29,At,2,4,"a",21),m.gc(30,"async"),m.Tb(),m.Ub(31,"div",22),m.Gc(32,Rt,2,4,"a",23),m.Tb(),m.Tb(),m.Tb(),m.Pb(33,"ad-host",24),m.Ub(34,"div",25),m.Gc(35,Et,5,7,"ng-container",0),m.gc(36,"async"),m.Gc(37,Xt,1,2,"user-reposts-tab",26),m.Pb(38,"user-playlists-tab",27),m.Ub(39,"uploaded-tracks-tab",28),m.Ub(40,"span",29),m.Ic(41,"\u4ec0\u4e48\u4e5f\u6ca1\u6709"),m.Tb(),m.Tb(),m.Ub(42,"user-follows-tab",30),m.Ub(43,"span",29),m.Ic(44,"\u8fd8\u6ca1\u6709\u7c89\u4e1d..."),m.Tb(),m.Tb(),m.Ub(45,"user-follows-tab",31),m.Ub(46,"span",29),m.Ic(47,"\u6ca1\u6709\u5173\u6ce8\u4efb\u4f55\u7528\u6237..."),m.Tb(),m.Tb(),m.Tb(),m.Pb(48,"ad-host",32),m.Rb()),2&t){const t=e.ngIf,n=m.fc();m.Cb(2),m.Dc("background-image",n.getProfileBackground()),m.Cb(2),m.mc("media",t),m.Cb(4),m.Kc(" ",t.display_name," "),m.Cb(1),m.mc("ngIf",t.first_name||t.last_name),m.Cb(1),m.mc("ngIf",n.isSubscribed()),m.Cb(4),m.Jc(t.followers_count),m.Cb(5),m.Jc(t.followed_users_count),m.Cb(3),m.mc("ngIf",t.id!==n.currentUser.get("id")),m.Cb(1),m.mc("ngIf",t.profile.description),m.Cb(1),m.mc("ngIf",t.profile.city||t.profile.country),m.Cb(2),m.mc("ngIf",t.id===n.currentUser.get("id")),m.Cb(3),m.mc("ngForOf",m.hc(30,24,n.tabs$)),m.Cb(3),m.mc("ngForOf",t.links),m.Cb(3),m.mc("ngIf",m.hc(36,26,n.canUploadTracks$)),m.Cb(2),m.mc("ngIf",n.settings.get("player.enable_repost")),m.Cb(1),m.mc("user",t)("visible",n.activeTabIs("\u6b4c\u5355")),m.Cb(1),m.mc("user",t)("visible",n.activeTabIs("\u559c\u6b22")),m.Cb(3),m.mc("user",t)("visible",n.activeTabIs("\u7c89\u4e1d")),m.Cb(3),m.mc("user",t)("visible",n.activeTabIs("\u5173\u6ce8"))}}let Qt=(()=>{class t{constructor(t,e,n,i,a,o,s,r,c,l,b){this.route=t,this.router=e,this.settings=n,this.urls=i,this.users=a,this.currentUser=o,this.cd=s,this.profile=r,this.modal=c,this.toast=l,this.sanitizer=b,this.tabs$=new d.a([]),this.subscriptions=[],this.user$=new d.a(null),this.canUploadTracks$=new d.a(!1)}ngOnInit(){this.route.data.subscribe(t=>{this.canUploadTracks$.next(t.api.canUploadTracks),this.user$.next(t.api.user);const e=[];this.canUploadTracks$.value&&e.push("\u5355\u66f2","\u4e13\u8f91"),this.settings.get("player.enable_repost")&&e.push("\u8f6c\u53d1"),e.push("\u559c\u6b22","\u6b4c\u5355","\u5173\u6ce8","\u7c89\u4e1d"),this.tabs$.next(e),this.setActiveTab(this.router.url)});const t=this.router.events.pipe(Object(g.a)(t=>t instanceof o.b)).subscribe(t=>{this.setActiveTab(t.url)});this.subscriptions.push(t)}ngOnDestroy(){this.subscriptions.forEach(t=>{t.unsubscribe()}),this.subscriptions=[]}getProfileBackground(){const t=this.user$.value.profile;if(t.header_colors||t.header_image)return this.sanitizer.bypassSecurityTrustStyle(t.header_image?`url(${t.header_image})`:`linear-gradient(315deg, ${t.header_colors[0]} 0%, ${t.header_colors[1]} 100%)`)}activeTabIs(t){return this.activeTab===t}setActiveTab(t){const e=decodeURI(t.split("/").pop());this.activeTab=this.tabs$.value.includes(e)?e:this.tabs$.value[0]}openEditProfileModal(){this.modal.open($,{user:this.user$.value}).beforeClosed().subscribe(t=>{t&&this.user$.next(Object.assign(Object.assign({},this.user$.value),t))})}favicon(t){return function(t){return t?(Object(V.a)(t)||(t=window.location.protocol+"//"+window.location.host),"https://www.google.cn/s2/favicons?domain="+new URL(t).origin):null}(t)}isSubscribed(){var t;return!!(null===(t=this.user$.value)||void 0===t?void 0:t.subscriptions)&&void 0!==this.user$.value.subscriptions.find(t=>t.valid)}}return t.\u0275fac=function(e){return new(e||t)(m.Ob(o.a),m.Ob(o.e),m.Ob(F.a),m.Ob(S.a),m.Ob(N.a),m.Ob(C.a),m.Ob(m.h),m.Ob(I),m.Ob(D.a),m.Ob(y.b),m.Ob(L.b))},t.\u0275cmp=m.Ib({type:t,selectors:[["user-profile-page"]],features:[m.Bb([G.a])],decls:2,vars:3,consts:[[4,"ngIf"],[1,"media-page-header"],[1,"header-bg"],[1,"flex-container"],[1,"header-image",3,"media"],[1,"header-content-wrapper"],[1,"header-content"],[1,"title"],["type","button","class","pro-badge","mat-icon-button","",3,"matTooltip",4,"ngIf"],[1,"subtitle","header-subtitle"],[1,"column","first-column"],[1,"column-value"],["trans","",1,"column-title"],[1,"column"],["class","action-buttons",4,"ngIf"],["class","text-emphasis",4,"ngIf"],["class","profile-location",4,"ngIf"],[1,"edit-buttons"],["type","button","mat-stroked-button","",3,"click",4,"ngIf"],[1,"nav-links-wrapper"],[1,"nav-links"],["class","nav-link","trans","",3,"routerLink","active",4,"ngFor","ngForOf"],[1,"user-links"],["target","_blank","mat-icon-button","",3,"href","matTooltip",4,"ngFor","ngForOf"],["slot","ads.general_top"],[1,"tabs"],["class","tab",3,"user","visible",4,"ngIf"],[1,"tab",3,"user","visible"],["contentType","likedTracks",1,"tab",3,"user","visible"],["trans",""],["contentType","followers",1,"tab",3,"user","visible"],["contentType","followedUsers",1,"tab",3,"user","visible"],["slot","ads.general_bottom",1,"margin-bottom"],["type","button","mat-icon-button","",1,"pro-badge",3,"matTooltip"],["svgIcon","star"],[1,"action-buttons"],["mat-flat-button","","color","accent","class","action-button","trans","",3,"click",4,"ngIf"],["mat-flat-button","","color","accent","trans","",1,"action-button",3,"click"],[1,"text-emphasis"],[1,"description-text"],[1,"profile-location"],["class","city",4,"ngIf"],["class","country",4,"ngIf"],[1,"city"],[1,"country"],["type","button","mat-stroked-button","",3,"click"],["svgIcon","edit"],["trans","",1,"nav-link",3,"routerLink"],["target","_blank","mat-icon-button","",3,"href","matTooltip"],[1,"user-link-image",3,"src","alt"],["contentType","uploadedTracks",1,"tab",3,"user","visible"],["trans","",3,"transValues"]],template:function(t,e){1&t&&(m.Gc(0,Jt,49,28,"ng-container",0),m.gc(1,"async")),2&t&&m.mc("ngIf",m.hc(1,1,e.user$))},directives:[i.o,z.a,_.a,i.n,j.a,Z,rt,mt,U.b,ht.a,k.a,o.h,U.a,Tt,Pt],pipes:[i.b,Mt.a],styles:['.header-bg[_ngcontent-%COMP%]{right:0;bottom:0;background-size:cover;background-repeat:no-repeat;background-position:50% 50%;transform:scale(1.01)}.header-bg[_ngcontent-%COMP%], .header-bg[_ngcontent-%COMP%]:before{position:absolute;top:0;left:0}.header-bg[_ngcontent-%COMP%]:before{content:"";background:linear-gradient(180deg,transparent -50%,#1e1e26);width:100%;height:100%}.media-page-header[_ngcontent-%COMP%]{color:#fff}.media-page-header[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{margin-bottom:20px}.media-page-header[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]{border-color:hsla(0,0%,100%,.6)}.media-page-header[_ngcontent-%COMP%]   .mat-stroked-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:5px}.media-page-header[_ngcontent-%COMP%]   .header-image[_ngcontent-%COMP%]{width:220px;height:220px}@media only screen and (max-width:768px){.media-page-header[_ngcontent-%COMP%]   .nav-links[_ngcontent-%COMP%]{flex-wrap:wrap;justify-content:center;margin-top:26px;flex:1}.media-page-header[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{margin-bottom:15px;margin-right:25px;margin-left:25px;padding-bottom:5px}}@media only screen and (max-width:599.99px){.media-page-header[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{margin-right:14px;margin-left:14px}}.pro-badge[_ngcontent-%COMP%]{left:8px;width:20px;height:20px;position:relative;top:-10px;background:var(--be-accent-default)}.pro-badge[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:block;width:15px;height:15px;line-height:15px;margin:auto}.text-emphasis[_ngcontent-%COMP%]{background:rgba(0,0,0,.4);padding:10px;border-radius:4px;max-width:700px}.description-text[_ngcontent-%COMP%]{margin:0;opacity:.8;overflow:hidden}.profile-location[_ngcontent-%COMP%]{margin-top:20px}.header-content-wrapper[_ngcontent-%COMP%]{display:flex;flex:1 1 auto}@media only screen and (max-width:1024px){.header-content-wrapper[_ngcontent-%COMP%]{display:block}.header-content-wrapper[_ngcontent-%COMP%]   .edit-buttons[_ngcontent-%COMP%]{display:none}}.header-content-wrapper[_ngcontent-%COMP%]   .edit-buttons[_ngcontent-%COMP%]{margin-left:auto}.nav-links-wrapper[_ngcontent-%COMP%]{display:flex;align-items:center}.nav-link[_ngcontent-%COMP%]{text-transform:capitalize}.user-links[_ngcontent-%COMP%]{margin-left:auto}@media only screen and (max-width:1024px){.nav-links-wrapper[_ngcontent-%COMP%]{flex-direction:column}.user-links[_ngcontent-%COMP%]{margin-top:8px;margin-left:0}}.user-link-image[_ngcontent-%COMP%]{display:inline-block;border-radius:4px}.header-subtitle[_ngcontent-%COMP%]{display:flex;color:currentColor;margin-bottom:20px}.header-subtitle[_ngcontent-%COMP%]   .first-column[_ngcontent-%COMP%]{padding-right:15px;margin-right:15px;border-right:1px solid var(--be-divider-default)}.header-subtitle[_ngcontent-%COMP%]   .column-value[_ngcontent-%COMP%]{font-weight:500;font-size:1.4rem}.header-subtitle[_ngcontent-%COMP%]   .column-title[_ngcontent-%COMP%]{font-size:1.3rem;opacity:.7}.tab[_ngcontent-%COMP%]{display:none;visibility:hidden;padding:0 20px}.tab.visible[_ngcontent-%COMP%]{display:block;visibility:visible}.no-results-message[_ngcontent-%COMP%], .tab[_ngcontent-%COMP%]   loading-indicator[_ngcontent-%COMP%]{margin:30px 0}']}),t})();var qt=n("JIr8"),Yt=n("5+tZ"),Kt=n("EY2u"),Wt=n("LRne"),Ht=n("OiQd");const Zt=[{path:":id/:name",component:Qt,resolve:{api:(()=>{class t{constructor(t,e,n){this.profiles=t,this.router=e,this.state=n}resolve(t,e){this.state.loading=!0;const n=+t.paramMap.get("id");return this.profiles.get(n).pipe(Object(qt.a)(()=>(this.state.loading=!1,this.router.navigate(["/"]),Kt.a)),Object(Yt.a)(t=>(this.state.loading=!1,t.user?Object(Wt.a)(t):(this.router.navigate(["/"]),Kt.a))))}}return t.\u0275fac=function(e){return new(e||t)(m.Yb(I),m.Yb(o.e),m.Yb(Ht.a))},t.\u0275prov=m.Kb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},data:{name:"user",noReuse:!0},children:[{path:":tabName",component:u.a}]}];let te=(()=>{class t{}return t.\u0275mod=m.Mb({type:t}),t.\u0275inj=m.Lb({factory:function(e){return new(e||t)},imports:[[o.i.forChild(Zt)],o.i]}),t})();var ee=n("6rvT"),ne=n("OwjJ"),ie=n("Iysn"),ae=n("X3pI");let oe=(()=>{class t{}return t.\u0275mod=m.Mb({type:t}),t.\u0275inj=m.Lb({factory:function(e){return new(e||t)},imports:[[i.c,r.a,a.a,c.a,l.a,b.a,o.i,te,ee.a,ne.a,ie.a,ae.a,h.m,h.z,s.f,U.c,k.b,ht.b]]}),t})()},rG4v:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var i=n("eNwd"),a=n("gcYM"),o=n("fXoL"),s=n("h586"),r=n("bv9b");let c=(()=>{class t{constructor(t,e,n){this.el=t,this.uploadQueue=e,this.cd=n,this.hidden=!0,this.subscription=this.uploadQueue.totalProgress().pipe(Object(a.a)(260,i.a,{leading:!0,trailing:!0})).subscribe(t=>{this.progress=t,this.hidden=100===t||0===this.uploadQueue.count$.value.pending,this.cd.markForCheck()})}ngOnDestroy(){this.subscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Ob(o.l),o.Ob(s.a),o.Ob(o.h))},t.\u0275cmp=o.Ib({type:t,selectors:[["upload-progress-bar"]],hostVars:2,hostBindings:function(t,e){2&t&&o.Gb("hidden",e.hidden)},decls:1,vars:1,consts:[["mode","determinate","color","accent",3,"value"]],template:function(t,e){1&t&&o.Pb(0,"mat-progress-bar",0),2&t&&o.mc("value",e.progress)},directives:[r.a],styles:["[_nghost-%COMP%]{display:block}"],changeDetection:0}),t})()}}]);